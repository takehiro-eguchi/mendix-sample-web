function _defineProperty(e,t,n){return(t=_toPropertyKey2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey2(e){var t=_toPrimitive2(e,"string");return"symbol"==typeof t?t:t+""}function _toPrimitive2(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}define(["react","react-dom","mendix/filters/builders","big.js"],(function(e,t,n,r){"use strict";function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var s=i(e),a=o(e),l=o(t),u=i(r);const c=e=>{e&&e.canExecute&&!e.isExecuting&&e.execute()};class d{constructor(e){_defineProperty(this,"selectionValue",void 0),_defineProperty(this,"type","Single"),this.selectionValue=e}updateProps(e){this.selectionValue=e}isSelected(e){var t;return(null===(t=this.selectionValue.selection)||void 0===t?void 0:t.id)===e.id}reduceTo(e){this.selectionValue.setSelection(e)}remove(e){this.selectionValue.setSelection(void 0)}}class h{constructor(e,t){_defineProperty(this,"selectionValue",void 0),_defineProperty(this,"selectableItems",void 0),_defineProperty(this,"type","Multi"),_defineProperty(this,"rangeStart",void 0),_defineProperty(this,"rangeEnd",void 0),this.selectionValue=e,this.selectableItems=t,this.rangeStart=void 0}isSelected(e){return this.selectionValue.selection.some((t=>t.id===e.id))}updateProps(e,t){this.selectionValue=e,this.selectableItems=t}get selectionStatus(){return 0===this.selectionValue.selection.length?"none":this.selectionValue.selection.length===this.selectableItems.length?"all":"some"}add(e){this._add(e),this._setRangeStart(e),this._setRangeEnd(void 0)}remove(e){this.isSelected(e)&&this.selectionValue.setSelection(this.selectionValue.selection.filter((t=>t.id!==e.id))),this._resetRange()}reduceTo(e){this.selectionValue.setSelection([e]),this._setRangeStart(e),this._setRangeEnd(void 0)}_add(e){this.isSelected(e)||this.selectionValue.setSelection(this.selectionValue.selection.concat(e))}_setRangeStart(e){let t=-1;void 0!==e&&(t=this.selectableItems.indexOf(e)),this.rangeStart=t>-1?t:void 0}_setRangeEnd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length)return void(this.rangeEnd=void 0);const[r,i]=t,o=this.rangeEnd,s=this.selectableItems.indexOf(r);this.rangeEnd=s>-1?s:void 0,this._updateSelectionWithRange({start:this.rangeStart,end:o,newEnd:s,selectionMode:i})}_updateSelectionWithRange(e){const{start:t,end:n,newEnd:r,selectionMode:i}=e,o="toggle"===i;if(void 0===t||-1===r||n===r)return;if(void 0===n){let e=this._getRange(t,r);return e=o?this._union(this.selectionValue.selection,e):e,void this.selectionValue.setSelection(e)}const s=this._getRange(t,n),a=this._getRange(t,r);let l=o?[...this.selectionValue.selection]:[];l=this._diff(l,s),l=this._union(l,a),this.selectionValue.setSelection(l)}_getRange(e,t){const n=this.selectableItems.length,[r,i]=[f(e,0,n),f(t,0,n)].sort(((e,t)=>e-t));return this.selectableItems.slice(r,i+1)}_resetRange(){this._setRangeStart(void 0),this._setRangeEnd(void 0)}_union(e,t){const n=[...e],r=new Set(e.map((e=>e.id)));for(const e of t)r.has(e.id)||(r.add(e.id),n.push(e));return n}_diff(e,t){const n=new Set(e),r=new Set(t.map((e=>e.id)));for(const e of n)r.has(e.id)&&n.delete(e);return Array.from(n)}selectAll(){this.selectionValue.setSelection(this.selectableItems),this._resetRange()}selectNone(){this.selectionValue.setSelection([]),this._resetRange()}selectUpTo(e,t){void 0===this.rangeStart?(this._add(e),this._setRangeStart(e)):this._setRangeEnd(e,t)}_findIndexInList(e,t,n){const r=this.selectableItems.length-1,i="forward"===t;if("edge"===n)return i?r:0;return f(i?e+n:e-n,0,r)}_findIndexInGrid(e,t,n){const{columnIndex:r}=function(e,t,n){if(n<0||n>=t)return{columnIndex:-1,rowIndex:-1};const r=n%e,i=function(e,t){return Math.floor(e/t)}(n,e);return{columnIndex:r,rowIndex:i}}(n,this.selectableItems.length,e);return"PageDown"===t?this.selectableItems.length-(n-r):"Home"===t?e-r:"End"===t?e+(n-(r+1)):r}selectUpToAdjacent(e,t,n,r){if(!1===t)return void this._resetRange();const i=this.selectableItems.findIndex((t=>t.id===e.id));let o=-1;if(o="direction"in r?this._findIndexInList(i,r.direction,r.size):this._findIndexInGrid(i,r.code,r.numberOfColumns),o===i)return;void 0===this.rangeStart&&this._setRangeStart(e);const s=this.selectableItems.at(o);s&&this._setRangeEnd(s,n)}}const f=(e,t,n)=>Math.min(Math.max(e,t),n);function p(t,n,r){const i=e.useRef([]),o=e.useRef(!1);o.current||(o.current="loading"!==(null==n?void 0:n.status)),e.useEffect((()=>{var e;const n=i.current,s=null!==(e=null==t?void 0:t.selection)&&void 0!==e?e:[],a=Array.isArray(s)?s:[s];(function(e,t){if(e.length!==t.length)return!1;const n=new Set(t.map((e=>e.id)));return e.every((e=>n.has(e.id)))})(n,a)||(i.current=a,o.current&&c(r))}),[null==t?void 0:t.selection,r]);const s=e.useRef(void 0);var a,l;void 0!==t&&("Single"===t.type?s.current?s.current.updateProps(t):s.current=new d(t):s.current?s.current.updateProps(t,null!==(a=n.items)&&void 0!==a?a:[]):s.current=new h(t,null!==(l=n.items)&&void 0!==l?l:[]));return s.current}const v=new Set(["KeyA","MetaLeft","MetaRight","ControlLeft","ControlRight"]),g=(e,t)=>{let n=!1;const[r,i]=function(e,t){let n=0,r=0;return[function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=(new Date).getTime()-r,l=()=>{n=0,r=(new Date).getTime(),e(...o)};n||(a>=t?l():n=window.setTimeout(l,t-a))},()=>{clearTimeout(n),n=0}]}((()=>{n=!0,e()}),500);return[{eventName:"onKeyDown",filter:(e,t)=>"Multi"===e.selectionType&&function(e){const t=e.currentTarget===e.target;return"KeyA"===e.code&&(e.metaKey||e.ctrlKey)&&t}(t),handler:r},{eventName:"onKeyUp",filter:(e,t)=>"Multi"===e.selectionType&&v.has(t.code)&&n,handler:()=>{n=!1,i(),null==t||t()}}]};function m(e,t){return t.metaKey||t.ctrlKey?"toggle":e.selectionMode}const _=e=>[{eventName:"onKeyDown",filter:(e,t)=>"ArrowUp"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"backward",size:1})},{eventName:"onKeyDown",filter:(e,t)=>"ArrowDown"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"forward",size:1})},{eventName:"onKeyDown",filter:(e,t)=>"PageUp"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"backward",size:t.pageSize})},{eventName:"onKeyDown",filter:(e,t)=>"PageDown"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"forward",size:t.pageSize})},{eventName:"onKeyDown",filter:(e,t)=>"Home"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"backward",size:"edge"})},{eventName:"onKeyDown",filter:(e,t)=>"End"===t.code&&"Multi"===e.selectionType,handler:(t,n)=>e(t.item,n.shiftKey,m(t,n),{direction:"forward",size:"edge"})}],y="com.mendix.widgets.web.selectable.selectionContext";class b{constructor(e,t){var n=this;_defineProperty(this,"selection",void 0),_defineProperty(this,"selectionHelper",void 0),_defineProperty(this,"onSelect",(function(){n.selectionHelper&&("Multi"===n.selectionHelper.type?n._onSelectItemMulti(...arguments):n._onSelectItemSingle(...arguments))})),_defineProperty(this,"_onSelectItemMulti",(function(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"Multi"===(null===(r=n.selectionHelper)||void 0===r?void 0:r.type)&&(t?n.selectionHelper.selectUpTo(e,i?"toggle":"clear"):n.selectItem(e,i))})),_defineProperty(this,"_onSelectItemSingle",(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.selectItem(e,r)})),_defineProperty(this,"onSelectAll",(e=>{this.selectionHelper&&("Single"!==this.selectionHelper.type?"selectAll"!==e&&"all"===this.selectionHelper.selectionStatus?this.selectionHelper.selectNone():this.selectionHelper.selectAll():console.warn("Datagrid: calling onSelectAll in single selection mode have no effect"))})),_defineProperty(this,"onSelectAdjacent",(function(){var e;"Multi"===(null===(e=n.selectionHelper)||void 0===e?void 0:e.type)&&n.selectionHelper.selectUpToAdjacent(...arguments)})),_defineProperty(this,"isSelected",(e=>!!this.selectionHelper&&this.selectionHelper.isSelected(e))),_defineProperty(this,"selectItem",((e,t)=>{void 0!==this.selectionHelper&&(!1!==t?this.selectionHelper.isSelected(e)?this.selectionHelper.remove(e):"Multi"===this.selectionHelper.type?this.selectionHelper.add(e):this.selectionHelper.reduceTo(e):this.selectionHelper.reduceTo(e))})),this.selection=e,this.selectionHelper=t}get selectionType(){if(void 0===this.selection)return"None";if("object"==typeof this.selection)return this.selection.type;if("None"===this.selection||"Single"===this.selection||"Multi"===this.selection)return this.selection;throw new Error("Unknown selection type: ".concat(this.selection))}}function w(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var E={};function x(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:E}var P=Object.assign,C=Object.getOwnPropertyDescriptor,O=Object.defineProperty,A=Object.prototype,T=[];Object.freeze(T);var k={};Object.freeze(k);var R="undefined"!=typeof Proxy,I=Object.toString();function N(){R||S("Proxy not available")}function M(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var D=function(){};function L(e){return"function"==typeof e}function F(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function j(e){return null!==e&&"object"==typeof e}function V(e){if(!j(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===I}function z(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function H(e,t,n){O(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function B(e,t,n){O(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function K(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return j(e)&&!0===e[n]}}function q(e){return e instanceof Map}function W(e){return e instanceof Set}var U=void 0!==Object.getOwnPropertySymbols;var G="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:U?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function J(e){return null===e?null:"object"==typeof e?""+e:e}function X(e,t){return A.hasOwnProperty.call(e,t)}var Z=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(n){t[n]=C(e,n)})),t};function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,o=void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function Y(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function ee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,te(e,t)}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var oe=Symbol("mobx-stored-annotations");function se(e){return Object.assign((function(t,n){if(le(n))return e.decorate_20223_(t,n);ae(t,n,e)}),e)}function ae(e,t,n){X(e,oe)||H(e,oe,Q({},e[oe])),function(e){return e.annotationType_===ge}(n)||(e[oe][t]=n)}function le(e){return"object"==typeof e&&"string"==typeof e.kind}var ue=Symbol("mobx administration"),ce=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=gt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return zt(this)},t.reportChanged=function(){jt(),Ht(this),Vt()},t.toString=function(){return this.name_},e}(),de=K("Atom",ce);function he(e,t,n){void 0===t&&(t=D),void 0===n&&(n=D);var r,i=new ce(e);return t!==D&&pn(dn,i,t,r),n!==D&&fn(i,n),i}var fe={identity:function(e,t){return e===t},structural:function(e,t){return Fr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Fr(e,t,1)}};function pe(e,t,n){return An(e)?e:Array.isArray(e)?Qe.array(e,{name:n}):V(e)?Qe.object(e,void 0,{name:n}):q(e)?Qe.map(e,{name:n}):W(e)?Qe.set(e,{name:n}):"function"!=typeof e||sn(e)||On(e)?e:z(e)?Pn(e):rn(n,e)}function ve(e){return e}var ge="override";function me(e,t){return{annotationType_:e,options_:t,make_:_e,extend_:ye,decorate_20223_:be}}function _e(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(sn(n.value))return 1;var o=we(e,this,t,n,!1);return O(r,t,o),2}function ye(e,t,n,r){var i=we(e,this,t,n);return e.defineProperty_(t,i,r)}function be(e,t){var n=t.kind,r=t.name,i=t.addInitializer,o=this;if("field"!=n){var s,a,l,u,c,d;if("method"==n)return sn(e)||(a=e,e=ut(null!=(l=null==(u=o.options_)?void 0:u.name)?l:r.toString(),a,null!=(c=null==(d=o.options_)?void 0:d.autoAction)&&c)),null!=(s=this.options_)&&s.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;S("Cannot apply '"+o.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+o.annotationType_+"' can only be used on properties with a function value.")}else i((function(){ae(this,r,o)}))}function we(e,t,n,r,i){var o,s,a,l,u,c,d,h;void 0===i&&(i=Mt.safeDescriptors),h=r,t.annotationType_,h.value;var f,p=r.value;null!=(o=t.options_)&&o.bound&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_));return{value:ut(null!=(s=null==(a=t.options_)?void 0:a.name)?s:n.toString(),p,null!=(l=null==(u=t.options_)?void 0:u.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(d=e.proxy_)?d:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function Se(e,t){return{annotationType_:e,options_:t,make_:Ee,extend_:xe,decorate_20223_:Pe}}function Ee(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!X(e.target_,t)||!On(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(On(n.value))return 1;var o=Ce(e,this,t,n,!1,!1);return O(r,t,o),2}function xe(e,t,n,r){var i,o=Ce(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function Pe(e,t){var n,r=t.name,i=t.addInitializer;return On(e)||(e=Pn(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function Ce(e,t,n,r,i,o){var s;void 0===o&&(o=Mt.safeDescriptors),s=r,t.annotationType_,s.value;var a,l=r.value;(On(l)||(l=Pn(l)),i)&&((l=l.bind(null!=(a=e.proxy_)?a:e.target_)).isMobXFlow=!0);return{value:l,configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function Oe(e,t){return{annotationType_:e,options_:t,make_:Ae,extend_:Te,decorate_20223_:ke}}function Ae(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Te(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,Q({},this.options_,{get:n.get,set:n.set}),r)}function ke(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=gr(this)[ue],i=Q({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new _t(i))})),function(){return this[ue].getObservablePropValue_(r)}}function Re(e,t){return{annotationType_:e,options_:t,make_:Ie,extend_:Ne,decorate_20223_:Me}}function Ie(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Ne(e,t,n,r){var i,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:pe,r)}function Me(e,t){var n=this,r=t.kind,i=t.name,o=new WeakSet;function s(e,t){var r,s,a=gr(e)[ue],l=new vt(t,null!=(r=null==(s=n.options_)?void 0:s.enhancer)?r:pe,"ObservableObject."+i.toString(),!1);a.values_.set(i,l),o.add(e)}if("accessor"==r)return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[ue].getObservablePropValue_(i)},set:function(e){return o.has(this)||s(this,e),this[ue].setObservablePropValue_(i,e)},init:function(e){return o.has(this)||s(this,e),e}}}var De="true",Le=Fe();function Fe(e){return{annotationType_:De,options_:e,make_:je,extend_:Ve,decorate_20223_:ze}}function je(e,t,n,r){var i,o,s,a;if(n.get)return rt.make_(e,t,n,r);if(n.set){var l=ut(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!Mt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(O(r,t,{configurable:!0,set:l}),2)}if(r!==e.target_&&"function"==typeof n.value)return z(n.value)?(null!=(a=this.options_)&&a.autoBind?Pn.bound:Pn).make_(e,t,n,r):(null!=(s=this.options_)&&s.autoBind?rn.bound:rn).make_(e,t,n,r);var u,c=!1===(null==(i=this.options_)?void 0:i.deep)?Qe.ref:Qe;"function"==typeof n.value&&null!=(o=this.options_)&&o.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return c.make_(e,t,n,r)}function Ve(e,t,n,r){var i,o,s;if(n.get)return rt.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!Mt.safeDescriptors||e.isPlainObject_,set:ut(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(s=e.proxy_)?s:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Qe.ref:Qe).extend_(e,t,n,r)}function ze(e,t){S("'"+this.annotationType_+"' cannot be used as a decorator")}var He={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Be(e){return e||He}Object.freeze(He);var Ke=Re("observable"),qe=Re("observable.ref",{enhancer:ve}),We=Re("observable.shallow",{enhancer:function(e,t,n){return null==e||yr(e)||nr(e)||ur(e)||hr(e)?e:Array.isArray(e)?Qe.array(e,{name:n,deep:!1}):V(e)?Qe.object(e,void 0,{name:n,deep:!1}):q(e)?Qe.map(e,{name:n,deep:!1}):W(e)?Qe.set(e,{name:n,deep:!1}):void 0}}),Ue=Re("observable.struct",{enhancer:function(e,t){return Fr(e,t)?t:e}}),Ge=se(Ke);function Je(e){return!0===e.deep?pe:!1===e.deep?ve:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:pe;var t,n,r}function Xe(e,t,n){return le(t)?Ke.decorate_20223_(e,t):F(t)?void ae(e,t,Ke):An(e)?e:V(e)?Qe.object(e,t,n):Array.isArray(e)?Qe.array(e,t):q(e)?Qe.map(e,t):W(e)?Qe.set(e,t):"object"==typeof e&&null!==e?e:Qe.box(e,t)}P(Xe,Ge);var Ze,$e,Ye={box:function(e,t){var n=Be(t);return new vt(e,Je(n),n.name,!0,n.equals)},array:function(e,t){var n=Be(t);return(!1===Mt.useProxies||!1===n.proxy?Rr:Gn)(e,Je(n),n.name)},map:function(e,t){var n=Be(t);return new lr(e,Je(n),n.name)},set:function(e,t){var n=Be(t);return new dr(e,Je(n),n.name)},object:function(e,t,n){return Dr((function(){return yn(!1===Mt.useProxies||!1===(null==n?void 0:n.proxy)?gr({},n):function(e,t){var n,r;return N(),e=gr(e,t),null!=(r=(n=e[ue]).proxy_)?r:n.proxy_=new Proxy(e,Nn)}({},n),e,t)}))},ref:se(qe),shallow:se(We),deep:Ge,struct:se(Ue)},Qe=P(Xe,Ye),et="computed",tt=Oe(et),nt=Oe("computed.struct",{equals:fe.structural}),rt=function(e,t){if(le(t))return tt.decorate_20223_(e,t);if(F(t))return ae(e,t,tt);if(V(e))return se(Oe(et,e));var n=V(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new _t(n)};Object.assign(rt,tt),rt.struct=se(nt);var it,ot=0,st=1,at=null!=(Ze=null==($e=C((function(){}),"name"))?void 0:$e.configurable)&&Ze,lt={value:"action",configurable:!0,writable:!1,enumerable:!1};function ut(e,t,n,r){function i(){return ct(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},at&&(lt.value=e,O(i,"name",lt)),i}function ct(e,t,n,r,i){var o=function(e,t,n,r){var i=!1,o=0,s=Mt.trackingDerivation,a=!t||!s;jt();var l=Mt.allowStateChanges;a&&(Ct(),l=ht(!0));var u=At(!0),c={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:u,notifySpy_:i,startTime_:o,actionId_:st++,parentActionId_:ot};return ot=c.actionId_,c}(0,t);try{return n.apply(r,i)}catch(e){throw o.error_=e,e}finally{!function(e){ot!==e.actionId_&&S(30);ot=e.parentActionId_,void 0!==e.error_&&(Mt.suppressReactionErrors=!0);ft(e.prevAllowStateChanges_),Tt(e.prevAllowStateReads_),Vt(),e.runAsAction_&&Ot(e.prevDerivation_);Mt.suppressReactionErrors=!1}(o)}}function dt(e,t){var n=ht(e);try{return t()}finally{ft(n)}}function ht(e){var t=Mt.allowStateChanges;return Mt.allowStateChanges=e,t}function ft(e){Mt.allowStateChanges=e}it=Symbol.toPrimitive;var pt,vt=function(e){function t(t,n,r,i,o){var s;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=fe.default),(s=e.call(this,r)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=n,s.name_=r,s.equals=o,s.value_=n(t,void 0,r),s}ee(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==Mt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Mn(this)){var t=Ln(this,{object:this,type:qn,newValue:e});if(!t)return Mt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Mt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Fn(this)&&Vn(this,{type:qn,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Dn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:qn,newValue:this.value_,oldValue:void 0}),jn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return J(this.get())},n[it]=function(){return this.valueOf()},t}(ce);pt=Symbol.toPrimitive;var gt,mt,_t=function(){function e(e){this.dependenciesState_=gt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=gt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new bt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=mt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||S(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=ut("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?fe.structural:fe.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==gt.UP_TO_DATE_)return;e.lowestObserverState_=gt.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===gt.UP_TO_DATE_&&(e.dependenciesState_=gt.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&S(32,this.name_,this.derivation),0!==Mt.inBatch||0!==this.observers_.size||this.keepAlive_){if(zt(this),St(this)){var e=Mt.trackingContext;this.keepAlive_&&!e&&(Mt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===gt.STALE_)return;e.lowestObserverState_=gt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===gt.POSSIBLY_STALE_?t.dependenciesState_=gt.STALE_:t.dependenciesState_===gt.UP_TO_DATE_&&(e.lowestObserverState_=gt.UP_TO_DATE_)}))}(this),Mt.trackingContext=e}}else St(this)&&(this.warnAboutUntrackedRead_(),jt(),this.value_=this.computeValue_(!1),Vt());var t=this.value_;if(wt(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&S(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else S(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===gt.NOT_TRACKING_,n=this.computeValue_(!0),r=t||wt(e)||wt(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=ht(!1);if(e)t=Et(this,this.derivation,this.scope_);else if(!0===Mt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new bt(e)}return ft(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(xt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return an((function(){var o=n.get();if(!r||t){var s=Ct();e({observableKind:"computed",debugObjectName:n.name_,type:qn,object:n,newValue:o,oldValue:i}),Ot(s)}r=!1,i=o}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return J(this.get())},t[pt]=function(){return this.valueOf()},e}(),yt=K("ComputedValue",_t);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(gt||(gt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(mt||(mt={}));var bt=function(e){this.cause=void 0,this.cause=e};function wt(e){return e instanceof bt}function St(e){switch(e.dependenciesState_){case gt.UP_TO_DATE_:return!1;case gt.NOT_TRACKING_:case gt.STALE_:return!0;case gt.POSSIBLY_STALE_:for(var t=At(!0),n=Ct(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(yt(s)){if(Mt.disableErrorBoundaries)s.get();else try{s.get()}catch(e){return Ot(n),Tt(t),!0}if(e.dependenciesState_===gt.STALE_)return Ot(n),Tt(t),!0}}return kt(e),Ot(n),Tt(t),!1}}function Et(e,t,n){var r=At(!0);kt(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Mt.runId;var i,o=Mt.trackingDerivation;if(Mt.trackingDerivation=e,Mt.inBatch++,!0===Mt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new bt(e)}return Mt.inBatch--,Mt.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=gt.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];0===a.diffValue_&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var l=t[o];0===l.diffValue_&&Lt(l,e),l.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Dt(u,e))}r!==gt.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Tt(r),i}function xt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Lt(t[n],e);e.dependenciesState_=gt.NOT_TRACKING_}function Pt(e){var t=Ct();try{return e()}finally{Ot(t)}}function Ct(){var e=Mt.trackingDerivation;return Mt.trackingDerivation=null,e}function Ot(e){Mt.trackingDerivation=e}function At(e){var t=Mt.allowStateReads;return Mt.allowStateReads=e,t}function Tt(e){Mt.allowStateReads=e}function kt(e){if(e.dependenciesState_!==gt.UP_TO_DATE_){e.dependenciesState_=gt.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=gt.UP_TO_DATE_}}var Rt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},It=!0,Nt=!1,Mt=function(){var e=x();return e.__mx_isolated_mobxInstanceCount>0&&!e.__mx_isolated_mobxGlobals&&(It=!1),e.__mx_isolated_mobxGlobals&&e.__mx_isolated_mobxGlobals.version!==(new Rt).version&&(It=!1),It?e.__mx_isolated_mobxGlobals?(e.__mx_isolated_mobxInstanceCount+=1,e.__mx_isolated_mobxGlobals.UNCHANGED||(e.__mx_isolated_mobxGlobals.UNCHANGED={}),e.__mx_isolated_mobxGlobals):(e.__mx_isolated_mobxInstanceCount=1,e.__mx_isolated_mobxGlobals=new Rt):(setTimeout((function(){Nt||S(35)}),1),new Rt)}();function Dt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Lt(e,t){e.observers_.delete(t),0===e.observers_.size&&Ft(e)}function Ft(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Mt.pendingUnobservations.push(e))}function jt(){Mt.inBatch++}function Vt(){if(0==--Mt.inBatch){Wt();for(var e=Mt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof _t&&n.suspend_())}Mt.pendingUnobservations=[]}}function zt(e){var t=Mt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Mt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Mt.inBatch>0&&Ft(e),!1)}function Ht(e){e.lowestObserverState_!==gt.STALE_&&(e.lowestObserverState_=gt.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===gt.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=gt.STALE_})))}var Bt=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=gt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=mt.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Mt.pendingReactions.push(this),Wt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){jt(),this.isScheduled_=!1;var e=Mt.trackingContext;if(Mt.trackingContext=this,St(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Mt.trackingContext=e,Vt()}},t.track=function(e){if(!this.isDisposed_){jt(),this.isRunning_=!0;var t=Mt.trackingContext;Mt.trackingContext=this;var n=Et(this,e,void 0);Mt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&xt(this),wt(n)&&this.reportExceptionInDerivation_(n.cause),Vt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Mt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Mt.suppressReactionErrors||console.error(n,e),Mt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(jt(),xt(this),Vt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[ue]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),Kt=100,qt=function(e){return e()};function Wt(){Mt.inBatch>0||Mt.isRunningReactions||qt(Ut)}function Ut(){Mt.isRunningReactions=!0;for(var e=Mt.pendingReactions,t=0;e.length>0;){++t===Kt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}Mt.isRunningReactions=!1}var Gt=K("Reaction",Bt);var Jt="action",Xt="autoAction",Zt="<unnamed action>",$t=me(Jt),Yt=me("action.bound",{bound:!0}),Qt=me(Xt,{autoAction:!0}),en=me("autoAction.bound",{autoAction:!0,bound:!0});function tn(e){return function(t,n){return L(t)?ut(t.name||Zt,t,e):L(n)?ut(t,n,e):le(n)?(e?Qt:$t).decorate_20223_(t,n):F(n)?ae(t,n,e?Qt:$t):F(t)?se(me(e?Xt:Jt,{name:t,autoAction:e})):void 0}}var nn=tn(!1);Object.assign(nn,$t);var rn=tn(!0);function on(e){return ct(e.name,!1,e,this,void 0)}function sn(e){return L(e)&&!0===e.isMobxAction}function an(e,t){var n,r,i,o,s;void 0===t&&(t=k);var a,l=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)a=new Bt(l,(function(){this.track(d)}),t.onError,t.requiresObservable);else{var u=un(t),c=!1;a=new Bt(l,(function(){c||(c=!0,u((function(){c=!1,a.isDisposed_||a.track(d)})))}),t.onError,t.requiresObservable)}function d(){e(a)}return null!=(i=t)&&null!=(o=i.signal)&&o.aborted||a.schedule_(),a.getDisposer_(null==(s=t)?void 0:s.signal)}Object.assign(rn,Qt),nn.bound=se(Yt),rn.bound=se(en);var ln=function(e){return e()};function un(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ln}function cn(e,t,n){var r,i,o,s;void 0===n&&(n=k);var a,l,u,c=null!=(r=n.name)?r:"Reaction",d=nn(c,n.onError?(a=n.onError,l=t,function(){try{return l.apply(this,arguments)}catch(e){a.call(this,e)}}):t),h=!n.scheduler&&!n.delay,f=un(n),p=!0,v=!1,g=n.compareStructural?fe.structural:n.equals||fe.default,m=new Bt(c,(function(){p||h?_():v||(v=!0,f(_))}),n.onError,n.requiresObservable);function _(){if(v=!1,!m.isDisposed_){var t=!1,r=u;m.track((function(){var n=dt(!1,(function(){return e(m)}));t=p||!g(u,n),u=n})),(p&&n.fireImmediately||!p&&t)&&d(u,r,m),p=!1}}return null!=(i=n)&&null!=(o=i.signal)&&o.aborted||m.schedule_(),m.getDisposer_(null==(s=n)?void 0:s.signal)}var dn="onBO",hn="onBUO";function fn(e,t,n){return pn(hn,e,t,n)}function pn(e,t,n,r){var i="function"==typeof r?Ir(t,n):Ir(t),o=L(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var e=i[s];e&&(e.delete(o),0===e.size&&delete i[s])}}var vn="never",gn="always",mn="observed";function _n(e){!0===e.isolateGlobalState&&function(){if((Mt.pendingReactions.length||Mt.inBatch||Mt.isRunningReactions)&&S(36),Nt=!0,It){var e=x();0==--e.__mx_isolated_mobxInstanceCount&&(e.__mx_isolated_mobxGlobals=void 0),Mt=new Rt}}();var t,n,r=e.useProxies,i=e.enforceActions;if(void 0!==r&&(Mt.useProxies=r===gn||r!==vn&&"undefined"!=typeof Proxy),"ifavailable"===r&&(Mt.verifyProxies=!0),void 0!==i){var o=i===gn?gn:i===mn;Mt.enforceActions=o,Mt.allowStateChanges=!0!==o&&o!==gn}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(Mt[t]=!!e[t])})),Mt.allowStateReads=!Mt.observableRequiresReaction,e.reactionScheduler&&(t=e.reactionScheduler,n=qt,qt=function(e){return t((function(){return n(e)}))})}function yn(e,t,n,r){var i=Z(t);return Dr((function(){var t=gr(e,r)[ue];G(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}function bn(e){var t,n={name:e.name_};return e.observing_&&e.observing_.length>0&&(n.dependencies=(t=e.observing_,Array.from(new Set(t))).map(bn)),n}var wn=0;function Sn(){this.message="FLOW_CANCELLED"}Sn.prototype=Object.create(Error.prototype);var En=Se("flow"),xn=Se("flow.bound",{bound:!0}),Pn=Object.assign((function(e,t){if(le(t))return En.decorate_20223_(e,t);if(F(t))return ae(e,t,En);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++wn,o=nn(r+" - runid: "+i+" - init",n).apply(this,t),s=void 0,a=new Promise((function(t,n){var a=0;function l(e){var t;s=void 0;try{t=nn(r+" - runid: "+i+" - yield "+a++,o.next).call(o,e)}catch(e){return n(e)}c(t)}function u(e){var t;s=void 0;try{t=nn(r+" - runid: "+i+" - yield "+a++,o.throw).call(o,e)}catch(e){return n(e)}c(t)}function c(e){if(!L(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,u);e.then(c,n)}e=n,l(void 0)}));return a.cancel=nn(r+" - runid: "+i+" - cancel",(function(){try{s&&Cn(s);var t=o.return(void 0),n=Promise.resolve(t.value);n.then(D,D),Cn(n),e(new Sn)}catch(t){e(t)}})),a};return i.isMobXFlow=!0,i}),En);function Cn(e){L(e.cancel)&&e.cancel()}function On(e){return!0===(null==e?void 0:e.isMobXFlow)}function An(e){return function(e,t){return!!e&&(void 0!==t?!!yr(e)&&e[ue].values_.has(t):yr(e)||!!e[ue]||de(e)||Gt(e)||yt(e))}(e)}function Tn(e,t){void 0===t&&(t=void 0),jt();try{return e.apply(t)}finally{Vt()}}function kn(e,t,n){return 1===arguments.length||t&&"object"==typeof t?function(e,t){var n,r,i;if(null!=t&&null!=(n=t.signal)&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var o=new Promise((function(n,o){var s,a=Rn(e,n,Q({},t,{onError:o}));r=function(){a(),o(new Error("WHEN_CANCELLED"))},i=function(){a(),o(new Error("WHEN_ABORTED"))},null==t||null==(s=t.signal)||null==s.addEventListener||s.addEventListener("abort",i)})).finally((function(){var e;return null==t||null==(e=t.signal)||null==e.removeEventListener?void 0:e.removeEventListener("abort",i)}));return o.cancel=r,o}(e,t):Rn(e,t,n||{})}function Rn(e,t,n){var r;if("number"==typeof n.timeout){var i=new Error("WHEN_TIMEOUT");r=setTimeout((function(){if(!s[ue].isDisposed_){if(s(),!n.onError)throw i;n.onError(i)}}),n.timeout)}n.name="When";var o=ut("When-effect",t),s=an((function(t){dt(!1,e)&&(t.dispose(),r&&clearTimeout(r),o())}),n);return s}function In(e){return e[ue]}Pn.bound=se(xn);var Nn={has:function(e,t){return In(e).has_(t)},get:function(e,t){return In(e).get_(t)},set:function(e,t,n){var r;return!!F(t)&&(null==(r=In(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!F(t)&&(null==(n=In(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=In(e).defineProperty_(t,n))||r},ownKeys:function(e){return In(e).ownKeys_()},preventExtensions:function(e){S(13)}};function Mn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Dn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),M((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Ln(e,t){var n=Ct();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&((t=r[i](t))&&!t.type&&S(14),t);i++);return t}finally{Ot(n)}}function Fn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function jn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),M((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Vn(e,t){var n=Ct(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);Ot(n)}}function zn(e,t,n){return Dr((function(){var r=gr(e,n)[ue];null!=t||(t=function(e){return X(e,oe)||H(e,oe,Q({},e[oe])),e[oe]}(e)),G(t).forEach((function(e){return r.make_(e,t[e])}))})),e}var Hn=Symbol("mobx-keys");function Bn(e,t,n){return V(e)?yn(e,e,t,n):(Dr((function(){var r=gr(e,n)[ue];if(!e[Hn]){var i=Object.getPrototypeOf(e),o=new Set([].concat(G(e),G(i)));o.delete("constructor"),o.delete(ue),H(i,Hn,o)}e[Hn].forEach((function(e){return r.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var Kn="splice",qn="update",Wn={get:function(e,t){var n=e[ue];return t===ue?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?X(Jn,t)?Jn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[ue];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){S(15)}},Un=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new ce(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Dn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),jn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&S("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&S(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&kr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=T),Mn(this)){var o=Ln(this,{object:this.proxy_,type:Kn,index:e,removedCount:t,added:n});if(!o)return T;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var s=n.length-t;this.updateArrayLength_(i,s)}var a=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,a),this.dehanceValues_(a)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var s=0;s<n.length;s++)this.values_[e+s]=n[s];for(var a=0;a<o.length;a++)this.values_[e+n.length+a]=o[a];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=Fn(this),o=i||r?{observableKind:"array",object:this.proxy_,type:qn,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&Vn(this,o)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=Fn(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Kn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Vn(this,o)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&S(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(Mn(this)){var i=Ln(this,{type:qn,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var o=new Array(e+1-n.length),s=0;s<o.length-1;s++)o[s]=void 0;o[o.length-1]=t,this.spliceWithArray_(n.length,0,o)}},e}();function Gn(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),N(),Dr((function(){var i=new Un(n,t,r,!1);B(i.values_,ue,i);var o=new Proxy(i.values_,Wn);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o}))}var Jn={clear:function(){return this.splice(0)},replace:function(e){var t=this[ue];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[ue];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[ue].spliceWithArray_(e,t,n)},push:function(){for(var e=this[ue],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[ue].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[ue],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Mt.trackingDerivation&&S(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Mt.trackingDerivation&&S(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[ue],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Xn(e,t){"function"==typeof Array.prototype[e]&&(Jn[e]=t(e))}function Zn(e){return function(){var t=this[ue];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function $n(e){return function(t,n){var r=this,i=this[ue];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function Yn(e){return function(){var t=this,n=this[ue];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Xn("at",Zn),Xn("concat",Zn),Xn("flat",Zn),Xn("includes",Zn),Xn("indexOf",Zn),Xn("join",Zn),Xn("lastIndexOf",Zn),Xn("slice",Zn),Xn("toString",Zn),Xn("toLocaleString",Zn),Xn("toSorted",Zn),Xn("toSpliced",Zn),Xn("with",Zn),Xn("every",$n),Xn("filter",$n),Xn("find",$n),Xn("findIndex",$n),Xn("findLast",$n),Xn("findLastIndex",$n),Xn("flatMap",$n),Xn("forEach",$n),Xn("map",$n),Xn("some",$n),Xn("toReversed",$n),Xn("reduce",Yn),Xn("reduceRight",Yn);var Qn,er,tr=K("ObservableArrayAdministration",Un);function nr(e){return j(e)&&tr(e[ue])}var rr={},ir="add",or="delete";Qn=Symbol.iterator,er=Symbol.toStringTag;var sr,ar,lr=function(){function e(e,t,n){var r=this;void 0===t&&(t=pe),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[ue]=rr,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,L(Map)||S(18),Dr((function(){r.keysAtom_=he("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Mt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new vt(this.has_(e),ve,"ObservableMap.key?",!1);this.hasMap_.set(e,r),fn(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Mn(this)){var r=Ln(this,{type:n?qn:ir,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Mn(this))&&!Ln(this,{type:or,object:this,name:e}))return!1;if(this.has_(e)){var n=Fn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:or,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Tn((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Vn(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Mt.UNCHANGED){var r=Fn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:qn,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Vn(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Tn((function(){var r,i=new vt(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=Fn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:ir,object:this,name:e,newValue:t}:null;r&&Vn(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return zr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return zr({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Qn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=ie(this);!(n=r()).done;){var i=n.value,o=i[0],s=i[1];e.call(t,s,o,this)}},t.merge=function(e){var t=this;return ur(e)&&(e=new Map(e)),Tn((function(){V(e)?function(e){var t=Object.keys(e);if(!U)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return A.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):q(e)?(e.constructor!==Map&&S(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&S(20,e)})),this},t.clear=function(){var e=this;Tn((function(){Pt((function(){for(var t,n=ie(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return Tn((function(){for(var n,r=function(e){if(q(e)||ur(e))return e;if(Array.isArray(e))return new Map(e);if(V(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return S(21,e)}(e),i=new Map,o=!1,s=ie(t.data_.keys());!(n=s()).done;){var a=n.value;if(!r.has(a))if(t.delete(a))o=!0;else{var l=t.data_.get(a);i.set(a,l)}}for(var u,c=ie(r.entries());!(u=c()).done;){var d=u.value,h=d[0],f=d[1],p=t.data_.has(h);if(t.set(h,f),t.data_.has(h)){var v=t.data_.get(h);i.set(h,v),p||(o=!0)}}if(!o)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var g=t.data_.keys(),m=i.keys(),_=g.next(),y=m.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=g.next(),y=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return jn(this,e)},t.intercept_=function(e){return Dn(this,e)},Y(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:er,get:function(){return"Map"}}]),e}(),ur=K("ObservableMap",lr);var cr={};sr=Symbol.iterator,ar=Symbol.toStringTag;var dr=function(){function e(e,t,n){var r=this;void 0===t&&(t=pe),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[ue]=cr,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,L(Set)||S(22),this.enhancer_=function(e,r){return t(e,r,n)},Dr((function(){r.atom_=he(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Tn((function(){Pt((function(){for(var t,n=ie(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=ie(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,Mn(this))&&!Ln(this,{type:ir,object:this,newValue:e}))return this;if(!this.has(e)){Tn((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=Fn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:ir,object:this,newValue:e}:null;n&&Vn(this,r)}return this},t.delete=function(e){var t=this;if(Mn(this)&&!Ln(this,{type:or,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Fn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:or,object:this,oldValue:e}:null;return Tn((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Vn(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return zr({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return zr({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return hr(e)&&(e=new Set(e)),Tn((function(){Array.isArray(e)||W(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&S("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return jn(this,e)},t.intercept_=function(e){return Dn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[sr]=function(){return this.values()},Y(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:ar,get:function(){return"Set"}}]),e}(),hr=K("ObservableSet",dr),fr=Object.create(null),pr="remove",vr=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Le),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new ce("ObservableObject.keys"),this.isPlainObject_=V(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof _t)return n.set(t),!0;if(Mn(this)){var r=Ln(this,{type:qn,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==Mt.UNCHANGED){var i=Fn(this),o=i?{type:qn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Vn(this,o)}return!0},t.get_=function(e){return Mt.trackingDerivation&&!X(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),X(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Mt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new vt(e in this.target_,ve,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[oe])&&n[e])return;S(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==A;){var i=C(r,e);if(i){var o=t.make_(this,e,i,r);if(0===o)return;if(1===o)break}r=Object.getPrototypeOf(r)}br(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&br(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{jt();var r=this.delete_(e);if(!r)return r;if(Mn(this)){var i=Ln(this,{object:this.proxy_||this.target_,name:e,type:ir,newValue:t.value});if(!i)return null;var o=i.newValue;t.value!==o&&(t=Q({},t,{value:o}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else O(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Vt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{jt();var i=this.delete_(e);if(!i)return i;if(Mn(this)){var o=Ln(this,{object:this.proxy_||this.target_,name:e,type:ir,newValue:t});if(!o)return null;t=o.newValue}var s=_r(e),a={configurable:!Mt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,a))return!1}else O(this.target_,e,a);var l=new vt(t,n,"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{Vt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{jt();var r=this.delete_(e);if(!r)return r;if(Mn(this))if(!Ln(this,{object:this.proxy_||this.target_,name:e,type:ir,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=_r(e),o={configurable:!Mt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,o))return!1}else O(this.target_,e,o);this.values_.set(e,new _t(t)),this.notifyPropertyAddition_(e,void 0)}finally{Vt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!X(this.target_,e))return!0;if(Mn(this)&&!Ln(this,{object:this.proxy_||this.target_,name:e,type:pr}))return null;try{var n,r;jt();var i,o=Fn(this),s=this.values_.get(e),a=void 0;if(!s&&o)a=null==(i=C(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof vt&&(a=s.value_),Ht(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),o){var l={type:pr,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:a,name:e};0,o&&Vn(this,l)}}finally{Vt()}return!0},t.observe_=function(e,t){return jn(this,e)},t.intercept_=function(e){return Dn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=Fn(this);if(i){var o=i?{type:ir,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&Vn(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),G(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function gr(e,t){var n;if(X(e,ue))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new vr(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Fe(e):void 0}(t));return H(e,ue,i),e}var mr=K("ObservableObjectAdministration",vr);function _r(e){return fr[e]||(fr[e]={get:function(){return this[ue].getObservablePropValue_(e)},set:function(t){return this[ue].setObservablePropValue_(e,t)}})}function yr(e){return!!j(e)&&mr(e[ue])}function br(e,t,n){var r;null==(r=e.target_[oe])||delete r[n]}var wr,Sr,Er=Ar(0),xr=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Pr=0,Cr=function(){};wr=Cr,Sr=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(wr.prototype,Sr):void 0!==wr.prototype.__proto__?wr.prototype.__proto__=Sr:wr.prototype=Sr;var Or=function(e,t,n){function r(t,n,r,i){var o;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this,Dr((function(){var e=new Un(r,n,i,!0);e.proxy_=ne(o),B(ne(o),ue,e),t&&t.length&&o.spliceWithArray(0,0,t),xr&&Object.defineProperty(ne(o),"0",Er)})),o}ee(r,e);var i=r.prototype;return i.concat=function(){this[ue].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return nr(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return zr({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Y(r,[{key:"length",get:function(){return this[ue].getArrayLength_()},set:function(e){this[ue].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(Cr,Symbol.toStringTag,Symbol.iterator);function Ar(e){return{enumerable:!1,configurable:!0,get:function(){return this[ue].get_(e)},set:function(t){this[ue].set_(e,t)}}}function Tr(e){O(Or.prototype,""+e,Ar(e))}function kr(e){if(e>Pr){for(var t=Pr;t<e+100;t++)Tr(t);Pr=e}}function Rr(e,t,n){return new Or(e,t,n)}function Ir(e,t){if("object"==typeof e&&null!==e){if(nr(e))return void 0!==t&&S(23),e[ue].atom_;if(hr(e))return e.atom_;if(ur(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||S(25,t,Mr(e)),n}if(yr(e)){if(!t)return S(26);var r=e[ue].values_.get(t);return r||S(27,t,Mr(e)),r}if(de(e)||yt(e)||Gt(e))return e}else if(L(e)&&Gt(e[ue]))return e[ue];S(28)}function Nr(e,t){return e||S(29),void 0!==t?Nr(Ir(e,t)):de(e)||yt(e)||Gt(e)||ur(e)||hr(e)?e:e[ue]?e[ue]:void S(24,e)}function Mr(e,t){var n;if(void 0!==t)n=Ir(e,t);else{if(sn(e))return e.name;n=yr(e)||ur(e)||hr(e)?Nr(e):Ir(e)}return n.name_}function Dr(e){var t=Ct(),n=ht(!0);jt();try{return e()}finally{Vt(),ft(n),Ot(t)}}Object.entries(Jn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&H(Or.prototype,t,n)})),kr(1e3);var Lr=A.toString;function Fr(e,t,n){return void 0===n&&(n=-1),jr(e,t,n)}function jr(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if("function"!==o&&"object"!==o&&"object"!=typeof t)return!1;var s=Lr.call(e);if(s!==Lr.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Vr(e),t=Vr(t);var a="[object Array]"===s;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,u=t.constructor;if(l!==u&&!(L(l)&&l instanceof l&&L(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return i[c]===t;if(r.push(e),i.push(t),a){if((c=e.length)!==t.length)return!1;for(;c--;)if(!jr(e[c],t[c],n-1,r,i))return!1}else{var d,h=Object.keys(e);if(c=h.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!X(t,d=h[c])||!jr(e[d],t[d],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Vr(e){return nr(e)?e.slice():q(e)||ur(e)||W(e)||hr(e)?Array.from(e.entries()):e}function zr(e){return e[Symbol.iterator]=Hr,e}function Hr(){return this}if(["Symbol","Map","Set"].forEach((function(e){void 0===x()[e]&&S("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Mr},$mobx:ue}),!e.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!zn)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Br(e){e()}function Kr(e){return bn(Ir(e,t));var t}var qr,Wr,Ur=function(){function e(e){var t=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(e){void 0===e&&(e=1e4),clearTimeout(t.sweepTimeout),t.sweepTimeout=void 0;var n=Date.now();t.registrations.forEach((function(r,i){n-r.registeredAt>=e&&(t.finalize(r.value),t.registrations.delete(i))})),t.registrations.size>0&&t.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){this.registrations.set(n,{value:t,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.registrations.delete(e)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){void 0===this.sweepTimeout&&(this.sweepTimeout=setTimeout(this.sweep,1e4))}}),e}(),Gr=new("undefined"!=typeof FinalizationRegistry?FinalizationRegistry:Ur)((function(e){var t;null===(t=e.reaction)||void 0===t||t.dispose(),e.reaction=null}));function Jr(e){e.reaction=new Bt("observer".concat(e.name),(function(){var t;e.stateVersion=Symbol(),null===(t=e.onStoreChange)||void 0===t||t.call(e)}))}var Xr="function"==typeof Symbol&&Symbol.for,Zr=null!==(Wr=null===(qr=Object.getOwnPropertyDescriptor((function(){}),"name"))||void 0===qr?void 0:qr.configurable)&&void 0!==Wr&&Wr,$r=Xr?Symbol.for("react.forward_ref"):"function"==typeof e.forwardRef&&e.forwardRef((function(e){return null})).$$typeof,Yr=Xr?Symbol.for("react.memo"):"function"==typeof e.memo&&e.memo((function(e){return null})).$$typeof;function Qr(t,n){var r;if(Yr&&t.$$typeof===Yr)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var i=null!==(r=null==n?void 0:n.forwardRef)&&void 0!==r&&r,o=t,a=t.displayName||t.name;if($r&&t.$$typeof===$r&&(i=!0,"function"!=typeof(o=t.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var l,u,c=function(e,t){return function(e,t){void 0===t&&(t="observed");var n=s.default.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(e){return Gr.unregister(r),r.onStoreChange=e,r.reaction||(Jr(r),r.stateVersion=Symbol()),function(){var e;r.onStoreChange=null,null===(e=r.reaction)||void 0===e||e.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var i,o,a=n.current;if(a.reaction||(Jr(a),Gr.register(n,a,a)),s.default.useDebugValue(a.reaction,Kr),s.default.useSyncExternalStore(a.subscribe,a.getSnapshot,a.getSnapshot),a.reaction.track((function(){try{i=e()}catch(e){o=e}})),o)throw o;return i}((function(){return o(e,t)}),a)};return c.displayName=t.displayName,Zr&&Object.defineProperty(c,"name",{value:t.name,writable:!0,configurable:!0}),t.contextTypes&&(c.contextTypes=t.contextTypes),i&&(c=e.forwardRef(c)),c=e.memo(c),l=t,u=c,Object.keys(l).forEach((function(e){ei[e]||Object.defineProperty(u,e,Object.getOwnPropertyDescriptor(l,e))})),c}var ei={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function ti(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}!function(e){e||(e=Br),_n({reactionScheduler:e})}(t.unstable_batchedUpdates),Gr.finalizeAllImmediately;var ni,ri={exports:{}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */var ii,oi=(ni||(ni=1,ii=ri,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)){if(i.length){var s=t.apply(null,i);s&&n.push(s)}}else if("object"===o){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var a in i)e.call(i,a)&&i[a]&&n.push(a)}}}return n.join(" ")}ii.exports?(t.default=t,ii.exports=t):window.classNames=t}()),ri.exports),si=ti(oi);const ai=e.forwardRef((function(t,n){let{className:r,borderTop:i,clickable:o,previewAsHidden:s,wrapText:a,alignment:l,tabIndex:u,...c}=t;return e.createElement("div",{className:si("td",{"td-borders":i,clickable:o,"hidden-column-preview":s,"wrap-text":a,["align-column-".concat(l)]:"string"==typeof l},r),role:"gridcell",tabIndex:null!=u?u:o?0:void 0,ref:n,...c})})),li=e.memo(ai),ui=Symbol("DefaultKeyNavContextValue"),ci=e.createContext(ui);function di(t){let{focusController:n,children:r}=t;const i=e.useMemo((()=>({focusController:n})),[n]);return e.createElement(ci.Provider,{value:i},r)}function hi(e,t){return"".concat(e,",").concat(t)}function fi(e){const[t,n]=e.split(",");return[parseInt(t,10),parseInt(n,10)]}function pi(t){const n=e.useRef(null),r=e.useRef(t.focusTarget),{focusController:i}=function(){const t=e.useContext(ci);if(t===ui)throw new Error("useKeyNavContext: context provider is missing");return t}(),[o,s]=e.useMemo((()=>{const e=hi(t.columnIndex,t.rowIndex);return[e===i.focusTarget,e]}),[t.columnIndex,t.rowIndex,i.focusTarget]),[a,l]=e.useState({canFocus:!1});return e.useEffect((()=>{const e=e=>l((t=>e.lastPos===s?{canFocus:!1}:e.targetPos===s?{canFocus:e.shouldFocus}:t));return i.addListener(e),()=>i.removeListener(e)}),[i,s]),e.useEffect((()=>{const{current:e}=r;if(a.canFocus){const t="function"==typeof e?e():n.current;null==t||t.focus()}}),[a]),{ref:n,tabIndex:o?0:-1,"data-position":s}}const vi=Qr((function(t){var n;const r=pi({columnIndex:null!==(n=t.columnIndex)&&void 0!==n?n:-1,rowIndex:t.rowIndex}),i=e.useMemo((()=>t.eventsController.getProps(t.item)),[t.item,t.eventsController]),o=rt((()=>t.column.renderCellContent(t.item))).get();return e.createElement(li,{alignment:t.column.alignment,borderTop:0===t.rowIndex,className:t.column.columnClass(t.item),wrapText:t.column.wrapText,clickable:t.clickable,previewAsHidden:t.preview&&(!t.column.isAvailable||t.column.isHidden),tabIndex:r.tabIndex,ref:r.ref,"data-position":r["data-position"],onClick:i.onClick,onDoubleClick:i.onDoubleClick,onMouseDown:i.onMouseDown,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp,onFocus:i.onFocus},o)}));function gi(t){let{direction:n}=t;const r="pagination-icon ".concat(n);switch(n){case"forward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M17.81 6.63C17.48 6.37 17 6.61 17 7.02V24.98C17 25.4 17.48 25.63 17.81 25.37L28.5 16.39C28.76 16.19 28.76 15.8 28.5 15.6L17.81 6.63Z",fill:"currentColor"}),e.createElement("path",{d:"M4.81 6.63C4.48 6.37 4 6.61 4 7.02V24.98C4 25.4 4.48 25.63 4.81 25.37L15.5 16.39C15.76 16.19 15.76 15.8 15.5 15.6L4.81 6.63Z",fill:"currentColor"})));case"step-forward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M8.81 6.63C8.48 6.37 8 6.61 8 7.02V24.98C8 25.4 8.48 25.63 8.81 25.37L20.5 16.39C20.76 16.19 20.76 15.8 20.5 15.6L8.81 6.63Z",fill:"currentColor"}),e.createElement("path",{d:"M24 6H22V26H24V6Z",fill:"currentColor"})));case"backward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M14.19 6.63L3.51 15.61C3.25 15.81 3.25 16.2 3.51 16.4L14.2 25.38C14.53 25.64 15.01 25.4 15.01 24.99V7.02C15.01 6.6 14.53 6.37 14.2 6.63H14.19Z",fill:"currentColor"}),e.createElement("path",{d:"M27.19 6.63L16.5 15.61C16.24 15.81 16.24 16.2 16.5 16.4L27.19 25.38C27.52 25.64 28 25.4 28 24.99V7.02C28 6.6 27.52 6.37 27.19 6.63Z",fill:"currentColor"})));case"step-backward":return e.createElement("span",{"aria-hidden":!0},e.createElement("svg",{className:r,viewBox:"0 0 32 32",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M23.19 6.63L11.51 15.61C11.25 15.81 11.25 16.2 11.51 16.4L23.2 25.38C23.53 25.64 24.01 25.4 24.01 24.99V7.02C24.01 6.6 23.53 6.37 23.2 6.63H23.19Z",fill:"currentColor"}),e.createElement("path",{d:"M10 6H8V26H10V6Z",fill:"currentColor"})));default:return e.createElement("div",null)}}function mi(t){var n,r,i,o,s,a,l,u,c;const d=void 0!==t.numberOfItems?Math.ceil(t.numberOfItems/t.pageSize):void 0,h=void 0!==d?d-1:0,f=void 0!==d,p="buttons"===t.pagination,v=0===t.numberOfItems?0:p?t.page*t.pageSize+1:1,g=p?(m=t.canNextPage,_=t.numberOfItems,y=t.page,b=t.pageSize,m||!_?0===_?_:(y+1)*b:_):t.page*t.pageSize>(null!==(n=t.numberOfItems)&&void 0!==n?n:0)?null!==(r=t.numberOfItems)&&void 0!==r?r:0:t.page*t.pageSize;var m,_,y,b;const w=e=>{t.setPaginationIndex&&t.setPaginationIndex(e)};if(0===t.numberOfItems&&"always"!==t.showPagingButtons)return null;const S="".concat(p?"".concat(v," to ").concat(g):g," ").concat(f?"of ".concat(null!==(i=t.numberOfItems)&&void 0!==i?i:(null!=d?d:1)*t.pageSize):"");return e.createElement("div",{"aria-label":null!==(o=t.labelPagination)&&void 0!==o?o:"Pagination",className:"pagination-bar"},p&&e.createElement(e.Fragment,null,e.createElement("button",{className:"btn pagination-button",disabled:0===t.page,..._i((()=>{t.gotoPage(0),w(0)})),"aria-label":null!==(s=t.labelFirstPage)&&void 0!==s?s:"Go to first page"},e.createElement(gi,{direction:"step-backward"})),e.createElement("button",{className:"btn pagination-button",disabled:!t.canPreviousPage,..._i((()=>{t.previousPage(),w(t.page-1)})),"aria-label":null!==(a=t.labelPreviousPage)&&void 0!==a?a:"Go to previous page"},e.createElement(gi,{direction:"backward"}))),e.createElement("span",{className:"sr-only sr-only-focusable"},null!==(l=t.labelPagingStatus)&&void 0!==l?l:"Currently showing"," ",S),e.createElement("div",{"aria-hidden":!0,className:"paging-status"},S),p&&e.createElement(e.Fragment,null,e.createElement("button",{"aria-label":null!==(u=t.labelNextPage)&&void 0!==u?u:"Go to next page",className:"btn pagination-button",disabled:!t.canNextPage,..._i((()=>{t.nextPage(),w(t.page+1)}))},e.createElement(gi,{direction:"forward"})),f&&e.createElement("button",{"aria-label":null!==(c=t.labelLastPage)&&void 0!==c?c:"Go to last page",className:"btn pagination-button",disabled:t.page===h||0===t.numberOfItems,..._i((()=>{t.gotoPage(h),w(h)}))},e.createElement(gi,{direction:"step-forward"}))))}function _i(e){return{onClick:e,onKeyDown:t=>{" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),t.stopPropagation(),e())}}}const yi=Symbol("NO_PROPS_VALUE"),bi=e.createContext(yi),wi=bi.Provider;function Si(){const t=e.useContext(bi);if(t===yi)throw new Error("useTableProps: failed to get value from props provider.");return t}function Ei(t){var n,r;const[i,o]=e.useState(!1),s=null!==(r=(n=e.useRef()).current)&&void 0!==r?r:n.current=function(e){let{setIsIntersecting:t}=e;return new IntersectionObserver((e=>{let[n]=e;t(n.isIntersecting)}))}({setIsIntersecting:o});return e.useEffect((()=>(t.current&&s.observe(t.current),()=>{s.disconnect()})),[s,t]),i}const xi=30;function Pi(t){const{className:n,style:r,paginationType:i,hasMoreItems:o,setPage:s,children:a,...l}=t,u="virtualScrolling"===i,[c,d,h]=function(t){const{setPage:n,hasMoreItems:r,isInfinite:i}=t,[o,s]=e.useState(0),a=e.useRef(null),l=Ei(a),u=e.useCallback((e=>{Math.floor(e.target.scrollHeight-xi-e.target.scrollTop)<=Math.floor(e.target.clientHeight)+2&&r&&n&&n((e=>e+1))}),[r,n]),c=e.useCallback((()=>{l&&i&&r&&o<=0&&a.current&&s(a.current.clientHeight-xi)}),[i,r,o,l]);return e.useLayoutEffect((()=>{setTimeout((()=>c()),100)}),[c]),[u,o,a]}({hasMoreItems:o,isInfinite:u,setPage:s});return e.createElement("div",{className:si("widget-datagrid-grid table",{"infinite-loading":u},n),role:"grid",...l,ref:h,style:u&&d>0?{...r,maxHeight:d}:r,onScroll:u?c:void 0},a)}function Ci(t){let{size:n="medium",withMargins:r=!1}=t;return e.createElement("div",{className:si("widget-datagrid-spinner",{"widget-datagrid-spinner-margin":r}),"aria-busy":!0,"aria-live":"polite"},e.createElement("div",{className:"widget-datagrid-spinner-loader widget-datagrid-spinner-loader-".concat(n)}))}function Oi(t){let{withCheckbox:n=!1}=t;return e.createElement("div",{className:"widget-datagrid-skeleton","aria-busy":!0,"aria-live":"polite"},n&&e.createElement("span",{className:"widget-datagrid-skeleton-loader widget-datagrid-skeleton-loader-small"}),e.createElement("span",{className:"widget-datagrid-skeleton-loader"}))}function Ai(t){return e.createElement(li,{...t,className:"column-selector"})}function Ti(t){let{columnsHidable:n,columnsSize:r,pageSize:i,useBorderTop:o=!0}=t;const{selectActionHelper:s}=Si();return e.createElement(e.Fragment,null,Array.from({length:i}).map(((t,i)=>{const a=o&&0===i;return e.createElement("div",{className:"tr",role:"row",key:i},s.showCheckboxColumn&&e.createElement(li,{borderTop:a,className:"widget-datagrid-col-select",tabIndex:-1},e.createElement("input",{type:"checkbox"})),Array.from({length:r}).map(((t,n)=>e.createElement(li,{alignment:"left",borderTop:a,key:"".concat(i,"-").concat(n)},e.createElement(Oi,null)))),n&&e.createElement(Ai,{key:"column_selector_cell",borderTop:a,tabIndex:-1}))})))}function ki(t){const{children:n}=t;return e.createElement("div",{className:si("widget-datagrid-grid-body table-content",t.className),role:"rowgroup"},t.isLoading?e.createElement(Ri,{...t,rowsSize:t.rowsSize>0?t.rowsSize:t.pageSize}):e.createElement(e.Fragment,null,n,t.isFetchingNextBatch&&e.createElement(Ri,{...t,rowsSize:t.pageSize,useBorderTop:!1})))}function Ri(t){return"spinner"===t.loadingType?e.createElement("div",{className:"widget-datagrid-loader-container"},e.createElement(Ci,{withMargins:!0,size:"large"})):e.createElement(Ti,{columnsHidable:t.columnsHidable,columnsSize:t.columnsSize,pageSize:t.rowsSize,useBorderTop:t.useBorderTop})}function Ii(t){let{children:n,className:r}=t;return e.createElement("div",{className:si("widget-datagrid-content",r)},n)}function Ni(t){const{pagingPosition:n,pagination:r,paginationType:i,loadMoreButtonCaption:o,hasMoreItems:s,setPage:a,...l}=t;return e.createElement("div",{...l,className:"widget-datagrid-footer table-footer"},("bottom"===n||"both"===n)&&r,s&&"loadMore"===i&&e.createElement("button",{className:"btn btn-primary widget-datagrid-load-more",onClick:()=>a&&a((e=>e+1)),tabIndex:0},o))}function Mi(t){const{children:n,headerTitle:r,...i}=t;return n?e.createElement("div",{...i,className:"widget-datagrid-header header-filters","aria-label":r||void 0},n):null}function Di(t){const n=e.useRef(null),{className:r,selectionMethod:i,selection:o,exporting:s,children:a,...l}=t,u=e.useMemo((()=>{const e={...t.style};return s&&n.current&&(e.height=n.current.offsetHeight),e}),[t.style,s]);return e.createElement("div",{...l,ref:n,style:u,className:si(r,"widget-datagrid",{"widget-datagrid-exporting":s,"widget-datagrid-selectable-rows":o,"widget-datagrid-selection-method-checkbox":o&&"checkbox"===i,"widget-datagrid-selection-method-click":o&&"rowClick"===i})},a)}function Li(t){return e.createElement("div",{...t,className:"widget-datagrid-top-bar table-header"},t.children)}function Fi(t){return e.createElement("div",{className:"widget-datagrid-modal-root",role:"presentation"},e.createElement("div",{className:"widget-datagrid-modal-overlay",role:"presentation"}),e.createElement("div",{className:"widget-datagrid-modal-main",role:"presentation"},t.children))}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}function Vi(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=n[0];if(1===n.length)return i;const o=()=>{const t=n.map((e=>({useScope:e(),scopeName:e.scopeName})));return function(n){const r=t.reduce(((e,t)=>{let{useScope:r,scopeName:i}=t;return{...e,...r(n)["__scope".concat(i)]}}),{});return e.useMemo((()=>({["__scope".concat(i.scopeName)]:r})),[r])}};return o.scopeName=i.scopeName,o}function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zi.apply(null,arguments)}function Hi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.forEach((t=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)))}const Bi=e.forwardRef(((t,n)=>{const{children:r,...i}=t,o=e.Children.toArray(r),s=o.find(Wi);if(s){const t=s.props.children,r=o.map((n=>n===s?e.Children.count(t)>1?e.Children.only(null):e.isValidElement(t)?t.props.children:null:n));return e.createElement(Ki,zi({},i,{ref:n}),e.isValidElement(t)?e.cloneElement(t,void 0,r):null)}return e.createElement(Ki,zi({},i,{ref:n}),r)}));Bi.displayName="Slot";const Ki=e.forwardRef(((t,n)=>{const{children:r,...i}=t;return e.isValidElement(r)?e.cloneElement(r,{...Ui(i,r.props),ref:n?Hi(n,r.ref):r.ref}):e.Children.count(r)>1?e.Children.only(null):null}));Ki.displayName="SlotClone";const qi=t=>{let{children:n}=t;return e.createElement(e.Fragment,null,n)};function Wi(t){return e.isValidElement(t)&&t.type===qi}function Ui(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=function(){o(...arguments),i(...arguments)}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}const Gi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((t,n)=>{const r=e.forwardRef(((t,r)=>{const{asChild:i,...o}=t,s=i?Bi:n;return e.useEffect((()=>{window[Symbol.for("radix-ui")]=!0}),[]),e.createElement(s,zi({},o,{ref:r}))}));return r.displayName="Primitive.".concat(n),{...t,[n]:r}}),{}),Ji="Progress",Xi=100,[Zi,$i]=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];const i=()=>{const n=r.map((t=>e.createContext(t)));return function(r){const i=(null==r?void 0:r[t])||n;return e.useMemo((()=>({["__scope".concat(t)]:{...r,[t]:i}})),[r,i])}};return i.scopeName=t,[function(n,i){const o=e.createContext(i),s=r.length;function a(n){const{scope:r,children:i,...a}=n,l=(null==r?void 0:r[t][s])||o,u=e.useMemo((()=>a),Object.values(a));return e.createElement(l.Provider,{value:u},i)}return r=[...r,i],a.displayName=n+"Provider",[a,function(r,a){const l=(null==a?void 0:a[t][s])||o,u=e.useContext(l);if(u)return u;if(void 0!==i)return i;throw new Error("`".concat(r,"` must be used within `").concat(n,"`"))}]},Vi(i,...n)]}(Ji),[Yi,Qi]=Zi(Ji),eo=e.forwardRef(((t,n)=>{const{__scopeProgress:r,value:i,max:o,getValueLabel:s=no,...a}=t,l=oo(o)?o:Xi,u=so(i,l)?i:null,c=io(u)?s(u,l):void 0;return e.createElement(Yi,{scope:r,value:u,max:l},e.createElement(Gi.div,ji({"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":io(u)?u:void 0,"aria-valuetext":c,role:"progressbar","data-state":ro(u,l),"data-value":null!=u?u:void 0,"data-max":l},a,{ref:n})))}));eo.propTypes={max(e,t,n){const r=e[t],i=String(r);return r&&!oo(r)?new Error(function(e,t){return"Invalid prop `max` of value `".concat(e,"` supplied to `").concat(t,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(Xi,"`.")}(i,n)):null},value(e,t,n){const r=e[t],i=String(r),o=oo(e.max)?e.max:Xi;return null==r||so(r,o)?null:new Error(function(e,t){return"Invalid prop `value` of value `".concat(e,"` supplied to `").concat(t,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(Xi," if no `max` prop is set)\n  - `null` if the progress is indeterminate.\n\nDefaulting to `null`.")}(i,n))}};const to=e.forwardRef(((t,n)=>{var r;const{__scopeProgress:i,...o}=t,s=Qi("ProgressIndicator",i);return e.createElement(Gi.div,ji({"data-state":ro(s.value,s.max),"data-value":null!==(r=s.value)&&void 0!==r?r:void 0,"data-max":s.max},o,{ref:n}))}));function no(e,t){return"".concat(Math.round(e/t*100),"%")}function ro(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function io(e){return"number"==typeof e}function oo(e){return io(e)&&!isNaN(e)&&e>0}function so(e,t){return io(e)&&!isNaN(e)&&e<=t&&e>=0}const ao=eo,lo=to;function uo(){return e.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},e.createElement("path",{d:"M14.205 3.205L12.795 1.795L8 6.585L3.205 1.795L1.795 3.205L6.585 8L1.795 12.795L3.205 14.205L8 9.415L12.795 14.205L14.205 12.795L9.415 8L14.205 3.205Z",fill:"currentColor"}))}function co(){return e.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},e.createElement("rect",{x:"13.3773",y:"10.5415",width:"5.30402",height:"14.7575",fill:"white"}),e.createElement("path",{d:"M29.71 24.97L23.77 15.11L17.64 4.94C16.89 3.69 15.11 3.69 14.36 4.94L8.23002 15.11L2.29002 24.97C1.50002 26.29 2.42002 28 3.94002 28H28.06C29.58 28 30.5 26.29 29.71 24.97ZM16 25C14.9 25 14 24.1 14 23C14 22 14.74 21.18 15.7 21.03C15.8 21.01 15.9 21 16 21C16.1 21 16.21 21.01 16.3 21.03C17.26 21.18 18 22 18 23C18 24.1 17.1 25 16 25ZM18 19H14V11H18V19Z",fill:"currentColor"}))}function ho(t){let{alertLabel:n,cancelLabel:r,failed:i,onCancel:o,progress:s,total:a}=t;const[l]=e.useState((()=>"widget-datagrid-export-alert-".concat(w())));return e.createElement("div",{id:l,className:si("widget-datagrid-export-alert",{"widget-datagrid-export-alert-failed":i}),role:"status","aria-live":"off","aria-label":n},e.createElement("button",{role:"button",className:"btn btn-image btn-icon widget-datagrid-export-alert-cancel",onClick:o,"aria-label":r,tabIndex:0},e.createElement(uo,null)),e.createElement("div",{className:"widget-datagrid-export-alert-message"},i?e.createElement(co,null):e.createElement("p",null,po(a)?function(e,t){return"".concat(e," / ").concat(t)}(s,a):s)),e.createElement(fo,{progress:s,total:a}))}function fo(t){let{progress:n,total:r}=t;const i=po(r)&&r;return e.createElement(ao,{className:"widget-datagrid-export-progress",value:i?n:null,max:r},e.createElement(lo,{className:si("widget-datagrid-export-progress-indicator",{"widget-datagrid-export-progress-indicator-indeterminate":!i}),style:i?vo(n,r):void 0}))}function po(e){return"number"==typeof e&&e>0}function vo(e,t){return{transform:"translateX(-".concat(100-go(e,0,t),"%)")}}function go(e,t,n){if(e<t)return 0;if(e>n)return 100;const r=n-t,i=Math.round((e-t)/r*100);return Math.abs(i)}function mo(t){let{open:n,...r}=t;return n?e.createElement(Fi,null,e.createElement(ho,{...r})):null}function _o(t){let{item:n,rowIndex:r,lastRow:i,...o}=t;const s=pi({columnIndex:0,rowIndex:r}),{selectActionHelper:a,checkboxEventsController:l,selectRowLabel:u,gridInteractive:c}=Si();return e.createElement(li,{...o,clickable:c,className:"widget-datagrid-col-select",tabIndex:-1},e.createElement("input",{checked:a.isSelected(n),type:"checkbox",tabIndex:s.tabIndex,"data-position":s["data-position"],onChange:bo,onFocus:i?yo:void 0,ref:s.ref,"aria-label":"".concat(null!=u?u:"Select row"," ").concat(r+1),...l.getProps(n)}))}function yo(e){var t;"function"==typeof(null===(t=e.target.parentElement)||void 0===t?void 0:t.scrollIntoView)&&e.target.parentElement.scrollIntoView(!1)}function bo(){}function wo(t){const{CellComponent:n,selectActionHelper:r,preview:i,totalRows:o,eventsController:s}=t,a=r.isSelected(t.item),l="None"===r.selectionType?void 0:a,u=0===t.index;return e.createElement("div",{className:si("tr",{"tr-selected":a,"tr-preview":i},t.className),role:"row","aria-selected":l},r.showCheckboxColumn&&e.createElement(_o,{item:t.item,key:"checkbox_cell",borderTop:u,rowIndex:t.index,lastRow:t.index===o-1}),t.columns.map(((o,a)=>{var l;const u=e.createElement(n,{key:"row_".concat(t.item.id,"_col_").concat(o.columnId),column:o,rowIndex:t.index,columnIndex:r.showCheckboxColumn?a+1:a,item:t.item,clickable:t.clickable,preview:i,eventsController:s});return i?null===(l=t.selectableWrapper)||void 0===l?void 0:l.call(t,a,u):u})),t.showSelectorCell&&e.createElement(Ai,{key:"column_selector_cell",borderTop:u,clickable:t.clickable,tabIndex:-1}))}function So(t){return e.createElement(di,{focusController:t.focusController},t.rows.map(((n,r)=>{var i;return e.createElement(wo,{totalRows:t.rows.length,clickable:t.interactive,selectActionHelper:t.selectActionHelper,preview:t.preview,eventsController:t.eventsController,CellComponent:t.Cell,className:null===(i=t.rowClass)||void 0===i?void 0:i.call(t,n),columns:t.columns,index:r,item:n,key:"row_".concat(n.id),showSelectorCell:t.columnsHidable,selectableWrapper:t.selectableWrapper})})))}function Eo(t){let{id:n,value:r,onChange:i}=t;const o=e.useRef(null);return e.useEffect((()=>{o.current&&("all"===r||"none"===r?o.current.indeterminate=!1:"some"===r&&(o.current.indeterminate=!0))}),[r]),e.createElement("input",{id:n,type:"checkbox",className:"three-state-checkbox",ref:o,checked:"none"!==r,onChange:i})}function xo(){const{selectActionHelper:t,selectionStatus:n}=Si(),{showCheckboxColumn:r,showSelectAllToggle:i,onSelectAll:o}=t;if(!1===r)return e.createElement(e.Fragment,null);let s=null;if(i){if("unknown"===n)throw new Error("Don't know how to render checkbox with selectionStatus=unknown");s=e.createElement(Eo,{value:n,onChange:o})}return e.createElement("div",{className:"th widget-datagrid-col-select",role:"columnheader"},s)}function Po(t){const n=e.useRef(t);return e.useEffect((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.current&&n.current.apply(void 0,t)}),[])}function Co(t){let{minWidth:n=50,setColumnWidth:r,onResizeEnds:i,onResizeStart:o}=t;const[s,a]=e.useState(!1),[l,u]=e.useState(0),[c,d]=e.useState(0),h=e.useRef(null),f=Po(o),p=e.useCallback((e=>{const t=e.touches?e.touches[0].screenX:e.screenX;if(u(t),a(!0),h.current){const e=h.current.parentElement;d(e.clientWidth)}f()}),[f]),v=e.useCallback((()=>{s&&(a(!1),d(0),null==i||i())}),[i,s]),g=Po(r),m=e.useCallback((e=>{if(!s)return;const t=e.touches?e.touches[0].screenX:e.screenX;if(c){let e=c-(l-t);e<n&&(e=n),g(e)}}),[s,c,l,n,g]);return e.useEffect((()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),document.addEventListener("touchmove",m),document.addEventListener("touchend",v),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",v)})),[m,v]),e.createElement("div",{"aria-hidden":!0,ref:h,className:"column-resizer",onMouseDown:p,onTouchStart:p},e.createElement("div",{className:"column-resizer-bar"}))}function Oo(){return"undefined"!=typeof window}function Ao(e){return Ro(e)?(e.nodeName||"").toLowerCase():"#document"}function To(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ko(e){var t;return null==(t=(Ro(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Ro(e){return!!Oo()&&(e instanceof Node||e instanceof To(e).Node)}function Io(e){return!!Oo()&&(e instanceof Element||e instanceof To(e).Element)}function No(e){return!!Oo()&&(e instanceof HTMLElement||e instanceof To(e).HTMLElement)}function Mo(e){return!(!Oo()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof To(e).ShadowRoot)}function Do(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ho(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Lo(e){return["table","td","th"].includes(Ao(e))}function Fo(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function jo(e){const t=Vo(),n=Io(e)?Ho(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Vo(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function zo(e){return["html","body","#document"].includes(Ao(e))}function Ho(e){return To(e).getComputedStyle(e)}function Bo(e){return Io(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ko(e){if("html"===Ao(e))return e;const t=e.assignedSlot||e.parentNode||Mo(e)&&e.host||ko(e);return Mo(t)?t.host:t}function qo(e){const t=Ko(e);return zo(t)?e.ownerDocument?e.ownerDocument.body:e.body:No(t)&&Do(t)?t:qo(t)}function Wo(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=qo(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),s=To(i);if(o){const e=function(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}(s);return t.concat(s,s.visualViewport||[],Do(i)?i:[],e&&n?Wo(e):[])}return t.concat(i,Wo(i,[],n))}function Uo(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Mo(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function Go(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function Jo(e){return(null==e?void 0:e.ownerDocument)||document}function Xo(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function Zo(e){return"composedPath"in e?e.composedPath()[0]:e.target}const $o="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";const Yo=Math.min,Qo=Math.max,es=Math.round,ts=Math.floor,ns=e=>({x:e,y:e});function rs(e,t){return"function"==typeof e?e(t):e}function is(e){return e.split("-")[0]}function os(e){return e.split("-")[1]}function ss(e){return"x"===e?"y":"x"}function as(e){return"y"===e?"height":"width"}function ls(e){return["top","bottom"].includes(is(e))?"y":"x"}function us(e){return ss(ls(e))}function cs(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function ds(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function hs(e,t,n){let{reference:r,floating:i}=e;const o=ls(t),s=us(t),a=as(s),l=is(t),u="y"===o,c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:c,y:r.y-i.height};break;case"bottom":f={x:c,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(os(t)){case"start":f[s]-=h*(n&&u?-1:1);break;case"end":f[s]+=h*(n&&u?-1:1)}return f}async function fs(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=rs(t,e),p=cs(f),v=a[h?"floating"===d?"reference":"floating":d],g=ds(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(v)))||n?v:v.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),m="floating"===d?{...s.floating,x:r,y:i}:s.reference,_=await(null==o.getOffsetParent?void 0:o.getOffsetParent(a.floating)),y=await(null==o.isElement?void 0:o.isElement(_))&&await(null==o.getScale?void 0:o.getScale(_))||{x:1,y:1},b=ds(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:_,strategy:l}):m);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}}function ps(e){const t=Ho(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=No(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=es(n)!==o||es(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function vs(e){return Io(e)?e:e.contextElement}function gs(e){const t=vs(e);if(!No(t))return ns(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=ps(t);let s=(o?es(n.width):n.width)/r,a=(o?es(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}const ms=ns(0);function _s(e){const t=To(e);return Vo()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ms}function ys(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=vs(e);let s=ns(1);t&&(r?Io(r)&&(s=gs(r)):s=gs(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==To(e))&&t}(o,n,r)?_s(o):ns(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,c=i.width/s.x,d=i.height/s.y;if(o){const e=To(o),t=r&&Io(r)?To(r):r;let n=e,i=n.frameElement;for(;i&&r&&t!==n;){const e=gs(i),t=i.getBoundingClientRect(),r=Ho(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,s=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=o,u+=s,n=To(i),i=n.frameElement}}return ds({width:c,height:d,x:l,y:u})}const bs=[":popover-open",":modal"];function ws(e){return bs.some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Ss(e){return ys(ko(e)).left+Bo(e).scrollLeft}function Es(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=To(e),r=ko(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const e=Vo();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=ko(e),n=Bo(e),r=e.ownerDocument.body,i=Qo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Qo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Ss(e);const a=-n.scrollTop;return"rtl"===Ho(r).direction&&(s+=Qo(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}(ko(e));else if(Io(t))r=function(e,t){const n=ys(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=No(e)?gs(e):ns(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=_s(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return ds(r)}function xs(e,t){const n=Ko(e);return!(n===t||!Io(n)||zo(n))&&("fixed"===Ho(n).position||xs(n,t))}function Ps(e,t,n){const r=No(t),i=ko(t),o="fixed"===n,s=ys(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=ns(0);if(r||!r&&!o)if(("body"!==Ao(t)||Do(i))&&(a=Bo(t)),r){const e=ys(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=Ss(i));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Cs(e,t){return No(e)&&"fixed"!==Ho(e).position?t?t(e):e.offsetParent:null}function Os(e,t){const n=To(e);if(!No(e)||ws(e))return n;let r=Cs(e,t);for(;r&&Lo(r)&&"static"===Ho(r).position;)r=Cs(r,t);return r&&("html"===Ao(r)||"body"===Ao(r)&&"static"===Ho(r).position&&!jo(r))?n:r||function(e){let t=Ko(e);for(;No(t)&&!zo(t);){if(jo(t))return t;if(Fo(t))return null;t=Ko(t)}return null}(e)||n}const As={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,s=ko(r),a=!!t&&ws(t.floating);if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=ns(1);const c=ns(0),d=No(r);if((d||!d&&!o)&&(("body"!==Ao(r)||Do(s))&&(l=Bo(r)),No(r))){const e=ys(r);u=gs(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}},getDocumentElement:ko,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let r=Wo(e,[],!1).filter((e=>Io(e)&&"body"!==Ao(e))),i=null;const o="fixed"===Ho(e).position;let s=o?Ko(e):e;for(;Io(s)&&!zo(s);){const t=Ho(s),n=jo(s);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||Do(s)&&!n&&xs(e,s))?r=r.filter((e=>e!==s)):i=t,s=Ko(s)}return t.set(e,r),r}(t,this._c):[].concat(n),r],s=o[0],a=o.reduce(((e,n)=>{const r=Es(t,n,i);return e.top=Qo(r.top,e.top),e.right=Yo(r.right,e.right),e.bottom=Yo(r.bottom,e.bottom),e.left=Qo(r.left,e.left),e}),Es(t,s,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Os,getElementRects:async function(e){const t=this.getOffsetParent||Os,n=this.getDimensions;return{reference:Ps(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ps(e);return{width:t,height:n}},getScale:gs,isElement:Io,isRTL:function(e){return"rtl"===Ho(e).direction}};function Ts(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,u=vs(e),c=i||o?[...u?Wo(u):[],...Wo(t)]:[];c.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));const d=u&&a?function(e,t){let n,r=null;const i=ko(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function s(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),o();const{left:u,top:c,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const f={rootMargin:-ts(c)+"px "+-ts(i.clientWidth-(u+d))+"px "+-ts(i.clientHeight-(c+h))+"px "+-ts(u)+"px",threshold:Qo(0,Yo(1,l))||1};let p=!0;function v(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return s();t?s(!1,t):n=setTimeout((()=>{s(!1,1e-7)}),100)}p=!1}try{r=new IntersectionObserver(v,{...f,root:i.ownerDocument})}catch(e){r=new IntersectionObserver(v,f)}r.observe(e)}(!0),o}(u,n):null;let h,f=-1,p=null;s&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),u&&!l&&p.observe(u),p.observe(t));let v=l?ys(e):null;return l&&function t(){const r=ys(e);!v||r.x===v.x&&r.y===v.y&&r.width===v.width&&r.height===v.height||n();v=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach((e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const ks=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s=(()=>{}),...a}=rs(e,t),l=await fs(t,a),u=is(n),c=os(n),d="y"===ls(n),{width:h,height:f}=r.floating;let p,v;"top"===u||"bottom"===u?(p=u,v=c===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(v=u,p="end"===c?"top":"bottom");const g=f-l[p],m=h-l[v],_=!t.middlewareData.shift;let y=g,b=m;if(d){const e=h-l.left-l.right;b=c||_?Yo(m,e):e}else{const e=f-l.top-l.bottom;y=c||_?Yo(g,e):e}if(_&&!c){const e=Qo(l.left,0),t=Qo(l.right,0),n=Qo(l.top,0),r=Qo(l.bottom,0);d?b=h-2*(0!==e||0!==t?e+t:Qo(l.left,l.right)):y=f-2*(0!==n||0!==r?n+r:Qo(l.top,l.bottom))}await s({...t,availableWidth:b,availableHeight:y});const w=await i.getDimensions(o.floating);return h!==w.width||f!==w.height?{reset:{rects:!0}}:{}}}},Rs=(e,t,n)=>{const r=new Map,i={platform:As,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=hs(u,r,l),h=r,f={},p=0;for(let n=0;n<a.length;n++){const{name:o,fn:v}=a[n],{x:g,y:m,data:_,reset:y}=await v({x:c,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:u,platform:s,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=m?m:d,f={...f,[o]:{...f[o],..._}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(u=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):y.rects),({x:c,y:d}=hs(u,h,l))),n=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:o})};var Is="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;function Ns(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!=r--;)if(!Ns(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!Ns(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function Ms(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ds(e,t){const n=Ms(e);return Math.round(t*n)/n}function Ls(e){const t=a.useRef(e);return Is((()=>{t.current=e})),t}const Fs=(e,t)=>({...ks(e),options:[e,t]}),js={...a},Vs=js.useInsertionEffect||(e=>e());function zs(e){const t=a.useRef((()=>{}));return Vs((()=>{t.current=e})),a.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}var Hs="undefined"!=typeof document?e.useLayoutEffect:e.useEffect;let Bs=!1,Ks=0;const qs=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ks++;const Ws=js.useId||function(){const[e,t]=a.useState((()=>Bs?qs():void 0));return Hs((()=>{null==e&&t(qs())}),[]),a.useEffect((()=>{Bs=!0}),[]),e};const Us=a.createContext(null),Gs=a.createContext(null),Js=()=>{var e;return(null==(e=a.useContext(Us))?void 0:e.id)||null},Xs=()=>a.useContext(Gs);function Zs(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}const $s="data-floating-ui-focusable";function Ys(e){return No(e.target)&&"BUTTON"===e.target.tagName}function Qs(e){return function(e){return No(e)&&e.matches($o)}(e)}const ea={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},ta={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},na=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function ra(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ws(),o=a.useRef({}),[s]=a.useState((()=>function(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}())),l=null!=Js(),[u,c]=a.useState(r.reference),d=zs(((e,t,r)=>{o.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=a.useMemo((()=>({setPositionReference:c})),[]),f=a.useMemo((()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference})),[u,r.reference,r.floating]);return a.useMemo((()=>({dataRef:o,open:t,onOpenChange:d,elements:f,events:s,floatingId:i,refs:h})),[t,d,f,s,i,h])}function ia(e){void 0===e&&(e={});const{nodeId:t}=e,n=ra({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=a.useState(null),[u,c]=a.useState(null),d=(null==i?void 0:i.domReference)||o,h=a.useRef(null),f=Xs();Hs((()=>{d&&(h.current=d)}),[d]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:u=!0,whileElementsMounted:c,open:d}=e,[h,f]=a.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,v]=a.useState(r);Ns(p,r)||v(r);const[g,m]=a.useState(null),[_,y]=a.useState(null),b=a.useCallback((e=>{e!==x.current&&(x.current=e,m(e))}),[]),w=a.useCallback((e=>{e!==P.current&&(P.current=e,y(e))}),[]),S=o||g,E=s||_,x=a.useRef(null),P=a.useRef(null),C=a.useRef(h),O=null!=c,A=Ls(c),T=Ls(i),k=Ls(d),R=a.useCallback((()=>{if(!x.current||!P.current)return;const e={placement:t,strategy:n,middleware:p};T.current&&(e.platform=T.current),Rs(x.current,P.current,e).then((e=>{const t={...e,isPositioned:!1!==k.current};I.current&&!Ns(C.current,t)&&(C.current=t,l.flushSync((()=>{f(t)})))}))}),[p,t,n,T,k]);Is((()=>{!1===d&&C.current.isPositioned&&(C.current.isPositioned=!1,f((e=>({...e,isPositioned:!1}))))}),[d]);const I=a.useRef(!1);Is((()=>(I.current=!0,()=>{I.current=!1})),[]),Is((()=>{if(S&&(x.current=S),E&&(P.current=E),S&&E){if(A.current)return A.current(S,E,R);R()}}),[S,E,R,A,O]);const N=a.useMemo((()=>({reference:x,floating:P,setReference:b,setFloating:w})),[b,w]),M=a.useMemo((()=>({reference:S,floating:E})),[S,E]),D=a.useMemo((()=>{const e={position:n,left:0,top:0};if(!M.floating)return e;const t=Ds(M.floating,h.x),r=Ds(M.floating,h.y);return u?{...e,transform:"translate("+t+"px, "+r+"px)",...Ms(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,u,M.floating,h.x,h.y]);return a.useMemo((()=>({...h,update:R,refs:N,elements:M,floatingStyles:D})),[h,R,N,M,D])}({...e,elements:{...i,...u&&{reference:u}}}),v=a.useCallback((e=>{const t=Io(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),p.refs.setReference(t)}),[p.refs]),g=a.useCallback((e=>{(Io(e)||null===e)&&(h.current=e,s(e)),(Io(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!Io(e))&&p.refs.setReference(e)}),[p.refs]),m=a.useMemo((()=>({...p.refs,setReference:g,setPositionReference:v,domReference:h})),[p.refs,g,v]),_=a.useMemo((()=>({...p.elements,domReference:d})),[p.elements,d]),y=a.useMemo((()=>({...p,...r,refs:m,elements:_,nodeId:t})),[p,m,_,t,r]);return Hs((()=>{r.dataRef.current.floatingContext=y;const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),a.useMemo((()=>({...p,context:y,refs:m,elements:_})),[p,m,_,y])}const oa="active",sa="selected";function aa(e,t,n){const r=new Map,i="item"===n;let o=e;if(i&&e){const{[oa]:t,[sa]:n,...r}=e;o=r}return{..."floating"===n&&{tabIndex:-1,[$s]:""},...o,...t.map((t=>{const r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var s;i&&[oa,sa].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof o&&(null==(s=r.get(n))||s.push(o),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=o)})),e):e),{})}}function la(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"eye",className:"svg-inline--fa fa-eye fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.589893 7.715C0.724893 7.52 3.91989 3 7.99989 3C12.0799 3 15.2749 7.52 15.4099 7.715L15.6099 8L15.4099 8.285C15.2749 8.48 12.0799 13 7.99989 13C3.91989 13 0.724893 8.48 0.589893 8.285L0.389893 8L0.589893 7.715ZM1.62489 8C2.37489 8.96 4.98989 12 7.99989 12C11.0099 12 13.6249 8.96 14.3749 8C13.6249 7.04 11.0099 4 7.99989 4C4.98989 4 2.37489 7.04 1.62489 8ZM5.5 8C5.5 6.62 6.62 5.5 8 5.5C9.38 5.5 10.5 6.62 10.5 8C10.5 9.38 9.38 10.5 8 10.5C6.62 10.5 5.5 9.38 5.5 8ZM6.5 8C6.5 8.825 7.175 9.5 8 9.5C8.825 9.5 9.5 8.825 9.5 8C9.5 7.175 8.825 6.5 8 6.5C7.175 6.5 6.5 7.175 6.5 8Z",fill:"currentColor"}))}function ua(n){var r;const{visibleLength:i}=n,[o,s]=e.useState(!1),[l,u]=e.useState(0),c=e.useRef(null),{refs:d,floatingStyles:h,context:f}=ia({open:o,placement:"bottom-end",strategy:"fixed",onOpenChange:s,middleware:[Fs({apply(e){let{availableHeight:n}=e;t.flushSync((()=>{u(n)}))}})],transform:!1,whileElementsMounted:Ts}),p=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:l=!0,outsidePress:u=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:f=!1,bubbles:p,capture:v}=t,g=Xs(),m=zs("function"==typeof u?u:()=>!1),_="function"==typeof u?m:u,y=a.useRef(!1),b=a.useRef(!1),{escapeKey:w,outsidePress:S}=na(p),{escapeKey:E,outsidePress:x}=na(v),P=a.useRef(!1),C=zs((e=>{var t;if(!n||!s||!l||"Escape"!==e.key)return;if(P.current)return;const i=null==(t=o.current.floatingContext)?void 0:t.nodeId,a=g?Zs(g.nodesRef.current,i):[];if(!w&&(e.stopPropagation(),a.length>0)){let e=!0;if(a.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),O=zs((e=>{var t;const n=()=>{var t;C(e),null==(t=Zo(e))||t.removeEventListener("keydown",n)};null==(t=Zo(e))||t.addEventListener("keydown",n)})),A=zs((e=>{var t;const n=y.current;y.current=!1;const s=b.current;if(b.current=!1,"click"===c&&s)return;if(n)return;if("function"==typeof _&&!_(e))return;const a=Zo(e),l="[data-floating-ui-inert]",u=Jo(i.floating).querySelectorAll(l);let d=Io(a)?a:null;for(;d&&!zo(d);){const e=Ko(d);if(zo(e)||!Io(e))break;d=e}if(u.length&&Io(a)&&!a.matches("html,body")&&!Uo(a,i.floating)&&Array.from(u).every((e=>!Uo(d,e))))return;if(No(a)&&R){const t=a.clientWidth>0&&a.scrollWidth>a.clientWidth,n=a.clientHeight>0&&a.scrollHeight>a.clientHeight;let r=n&&e.offsetX>a.clientWidth;if(n&&"rtl"===Ho(a).direction&&(r=e.offsetX<=a.offsetWidth-a.clientWidth),r||t&&e.offsetY>a.clientHeight)return}const h=null==(t=o.current.floatingContext)?void 0:t.nodeId,f=g&&Zs(g.nodesRef.current,h).some((t=>{var n;return Xo(e,null==(n=t.context)?void 0:n.elements.floating)}));if(Xo(e,i.floating)||Xo(e,i.domReference)||f)return;const p=g?Zs(g.nodesRef.current,h):[];if(p.length>0){let e=!0;if(p.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),T=zs((e=>{var t;const n=()=>{var t;A(e),null==(t=Zo(e))||t.removeEventListener(c,n)};null==(t=Zo(e))||t.addEventListener(c,n)}));a.useEffect((()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=w,o.current.__outsidePressBubbles=S;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function a(){window.clearTimeout(e),P.current=!0}function u(){e=window.setTimeout((()=>{P.current=!1}),Vo()?5:0)}const d=Jo(i.floating);l&&(d.addEventListener("keydown",E?O:C,E),d.addEventListener("compositionstart",a),d.addEventListener("compositionend",u)),_&&d.addEventListener(c,x?T:A,x);let h=[];return f&&(Io(i.domReference)&&(h=Wo(i.domReference)),Io(i.floating)&&(h=h.concat(Wo(i.floating))),!Io(i.reference)&&i.reference&&i.reference.contextElement&&(h=h.concat(Wo(i.reference.contextElement)))),h=h.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),h.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{l&&(d.removeEventListener("keydown",E?O:C,E),d.removeEventListener("compositionstart",a),d.removeEventListener("compositionend",u)),_&&d.removeEventListener(c,x?T:A,x),h.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[o,i,l,_,c,n,r,f,s,w,S,C,E,O,A,x,T]),a.useEffect((()=>{y.current=!1}),[_,c]);const k=a.useMemo((()=>({onKeyDown:C,[ea[h]]:e=>{d&&r(!1,e.nativeEvent,"reference-press")}})),[C,r,d,h]),R=a.useMemo((()=>({onKeyDown:C,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[ta[c]]:()=>{y.current=!0}})),[C,c]);return a.useMemo((()=>s?{reference:k,floating:R}:{}),[s,k,R])}(f),v=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:l="click",toggle:u=!0,ignoreMouse:c=!1,keyboardHandlers:d=!0}=t,h=a.useRef(),f=a.useRef(!1),p=a.useMemo((()=>({onPointerDown(e){h.current=e.pointerType},onMouseDown(e){const t=h.current;0===e.button&&"click"!==l&&(Go(t,!0)&&c||(!n||!u||i.current.openEvent&&"mousedown"!==i.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){const t=h.current;"mousedown"===l&&h.current?h.current=void 0:Go(t,!0)&&c||(!n||!u||i.current.openEvent&&"click"!==i.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){h.current=void 0,e.defaultPrevented||!d||Ys(e)||(" "!==e.key||Qs(o)||(e.preventDefault(),f.current=!0),"Enter"===e.key&&r(!n||!u,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!d||Ys(e)||Qs(o)||" "===e.key&&f.current&&(f.current=!1,r(!n||!u,e.nativeEvent,"click"))}})),[i,o,l,c,d,r,n,u]);return a.useMemo((()=>s?{reference:p}:{}),[s,p])}(f),{getReferenceProps:g,getFloatingProps:m}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),i=a.useCallback((t=>aa(t,e,"reference")),t),o=a.useCallback((t=>aa(t,e,"floating")),n),s=a.useCallback((t=>aa(t,e,"item")),r);return a.useMemo((()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s})),[i,o,s])}([v,p]),_=null!==(r=n.label)&&void 0!==r?r:"Column selector",y=e.useMemo((()=>n.columns.findIndex((e=>e.canHide))),[n.columns]),b=e.useMemo((()=>n.columns.map((e=>e.canHide)).lastIndexOf(!0)),[n.columns]);e.useLayoutEffect((()=>{o?setTimeout((()=>{var e;null===(e=d.floating)||void 0===e||null===(e=e.current)||void 0===e||null===(e=e.querySelector("li"))||void 0===e||e.focus()}),10):setTimeout((()=>{var e;null===(e=d.reference)||void 0===e||null===(e=e.current)||void 0===e||e.focus()}),10)}),[o]);const w=e.createElement("ul",{ref:d.setFloating,id:"".concat(n.id,"-column-selectors"),className:"column-selectors","data-focusindex":0,role:"menu",style:{...h,maxHeight:l},...m()},n.columns.map(((t,r)=>{const o=!t.isHidden,a=o&&1===i,l=()=>{a||t.toggleHidden()};return t.canHide?e.createElement("li",{key:t.columnId,onClick:e=>{e.preventDefault(),e.stopPropagation(),l()},onKeyDown:e=>{if("Enter"===e.key||" "===e.key)e.preventDefault(),e.stopPropagation(),l();else if("Tab"===e.key&&(r===b||e.shiftKey&&r===y)||"Escape"===e.key){var t;e.preventDefault(),s(!1),null===(t=c.current)||void 0===t||t.focus()}},role:"menuitem",tabIndex:0},e.createElement("input",{checked:o,disabled:a,id:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"},type:"checkbox",tabIndex:-1,onChange:ca}),e.createElement("label",{htmlFor:"".concat(n.id,"_checkbox_toggle_").concat(r),style:{pointerEvents:"none"}},t.header)):null})));return e.createElement("div",{"aria-label":_,className:"th column-selector",role:"columnheader",title:_},e.createElement("div",{className:"column-selector-content"},e.createElement("button",{"aria-label":_,ref:d.setReference,className:"btn btn-default column-selector-button",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation())},...g(),"aria-haspopup":!0,"aria-expanded":o,"aria-controls":"".concat(n.id,"-column-selectors")},e.createElement(la,null))),o&&w)}function ca(){}function da(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-down",className:"svg-inline--fa fa-long-arrow-alt-down fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M168 345.941V44c0-6.627-5.373-12-12-12h-56c-6.627 0-12 5.373-12 12v301.941H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.569 9.373 33.941 0l86.059-86.059c15.119-15.119 4.411-40.971-16.971-40.971H168z"}))}function ha(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"long-arrow-alt-up",className:"svg-inline--fa fa-long-arrow-alt-up fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M88 166.059V468c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12V166.059h46.059c21.382 0 32.09-25.851 16.971-40.971l-86.059-86.059c-9.373-9.373-24.569-9.373-33.941 0l-86.059 86.059c-15.119 15.119-4.411 40.971 16.971 40.971H88z"}))}function fa(){return e.createElement("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"arrows-alt-v",className:"svg-inline--fa fa-arrows-alt-v fa-w-8",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 512"},e.createElement("path",{fill:"currentColor",d:"M214.059 377.941H168V134.059h46.059c21.382 0 32.09-25.851 16.971-40.971L144.971 7.029c-9.373-9.373-24.568-9.373-33.941 0L24.971 93.088c-15.119 15.119-4.411 40.971 16.971 40.971H88v243.882H41.941c-21.382 0-32.09 25.851-16.971 40.971l86.059 86.059c9.373 9.373 24.568 9.373 33.941 0l86.059-86.059c15.12-15.119 4.412-40.971-16.97-40.971z"}))}function pa(t){var n,r,i,o,s;const a=t.sortable&&t.column.canSort,l=function(t,n,r,i,o,s){const a=e.useCallback((e=>{var t,n,r;const i=e.target.closest(".th"),o=null!==(t=i.dataset.columnId)&&void 0!==t?t:"",a=null===(n=i.previousElementSibling)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.columnId,l=null===(r=i.nextElementSibling)||void 0===r||null===(r=r.dataset)||void 0===r?void 0:r.columnId;s([a,o,l])}),[s]),l=e.useCallback((e=>{if(!o)return;const t=e.currentTarget.dataset.columnId;if(!t)return;e.preventDefault();const[n,s,a]=o;if(t===s)return void(void 0!==r&&i(void 0));let l;if(t===n)l=!1;else if(t===a)l=!0;else{const t=e.currentTarget.getBoundingClientRect();l=t.width/2+("after"===(null==r?void 0:r[1])?-10:10)<e.clientX-t.left}const u=l?"after":"before";t===(null==r?void 0:r[0])&&u===(null==r?void 0:r[1])||i([t,u])}),[o,r,i]),u=e.useCallback((e=>{e.preventDefault()}),[]),c=e.useCallback((()=>{s(void 0),i(void 0)}),[i,s]),d=e.useCallback((e=>{c(),o&&r&&n(o[1],r)}),[c,n,o,r]);return t?{draggable:!0,onDragStart:a,onDragOver:l,onDrop:d,onDragEnter:u,onDragEnd:c}:{}}(t.draggable&&null!==(n=t.column.canDrag)&&void 0!==n&&n,t.swapColumns,t.dropTarget,t.setDropTarget,t.isDragging,t.setIsDragging),u=a?function(t){switch(t.sortDir){case"asc":return e.createElement(ha,null);case"desc":return e.createElement(da,null);default:return e.createElement(fa,null)}}(t.column):null,c=a?(d=t.column,{onClick:()=>{d.toggleSort()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d.toggleSort())},role:"button",tabIndex:0}):null;var d;const h=t.column.header.trim();return e.createElement("div",{"aria-sort":va(a,t.column),className:si("th",{"hidden-column-preview":t.preview&&(!t.column.isAvailable||t.hidable&&t.column.isHidden)},{["drop-".concat(null===(r=t.dropTarget)||void 0===r?void 0:r[1])]:t.column.columnId===(null===(i=t.dropTarget)||void 0===i?void 0:i[0]),dragging:t.column.columnId===(null===(o=t.isDragging)||void 0===o?void 0:o[1]),"dragging-over-self":t.column.columnId===(null===(s=t.isDragging)||void 0===s?void 0:s[1])&&!t.dropTarget}),role:"columnheader",style:a?void 0:{cursor:"unset"},title:h,ref:e=>t.column.setHeaderElementRef(e),"data-column-id":t.column.columnId,onDrop:l.onDrop,onDragEnter:l.onDragEnter,onDragOver:l.onDragOver},e.createElement("div",{className:si("column-container"),id:"".concat(t.gridId,"-column").concat(t.column.columnId),draggable:l.draggable,onDragStart:l.onDragStart,onDragEnd:l.onDragEnd},e.createElement("div",{className:si("column-header",{clickable:a},t.className),style:{pointerEvents:t.isDragging?"none":void 0},...c,"aria-label":a?"sort "+h:h},e.createElement("span",null,h.length>0?h:" "),u),t.filterable&&t.filterWidget),t.resizable&&t.column.canResize&&t.resizer)}function va(e,t){if(e)switch(t.sortDir){case"asc":return"ascending";case"desc":return"descending";default:return"none"}}function ga(t){let{size:n}=t;return e.createElement("div",{key:"headers_row",className:"tr",role:"row"},Array.from({length:n}).map(((t,n)=>e.createElement("div",{className:"th",role:"columnheader",key:n},e.createElement("div",{className:"column-container"},e.createElement("div",{className:"column-header align-column-left"},e.createElement("span",null,e.createElement(Oi,null))))))))}function ma(t){let{availableColumns:n,columns:r,setIsResizing:i,columnsDraggable:o,columnsFilterable:s,columnsHidable:a,columnsResizable:l,columnsSortable:u,columnsSwap:c,filterRenderer:d,headerWrapperRenderer:h,id:f,isLoading:p,preview:v}=t;const[g,m]=e.useState(void 0),[_,y]=e.useState(),b=e.useCallback((t=>e.createElement("div",{className:"filter",style:{pointerEvents:_?"none":void 0}},t)),[_]);return p?e.createElement(ga,{size:r.length}):e.createElement("div",{className:"widget-datagrid-grid-head",role:"rowgroup"},e.createElement("div",{key:"headers_row",className:"tr",role:"row"},e.createElement(xo,{key:"headers_column_select_all"}),r.map(((t,n)=>h(n,e.createElement(pa,{key:"".concat(t.columnId),className:"align-column-".concat(t.alignment),gridId:f,column:t,draggable:o,dropTarget:g,filterable:s,filterWidget:d(b,t.columnIndex),hidable:a,isDragging:_,preview:v,resizable:l&&r.at(-1)!==t,resizer:e.createElement(Co,{onResizeStart:()=>i(!0),onResizeEnds:()=>i(!1),setColumnWidth:e=>t.setSize(e)}),swapColumns:c,setDropTarget:m,setIsDragging:y,sortable:u})))),a&&e.createElement(ua,{key:"headers_column_selector",columns:n,id:f,visibleLength:r.length})))}const _a=Qr((t=>{var n,r;const{className:i,exporting:o,numberOfItems:s,onExportCancel:a,selectActionHelper:l}=t,u="None"!==l.selectionType;return e.createElement(wi,{value:t},e.createElement(Di,{className:i,selectionMethod:l.selectionMethod,selection:u,style:{},exporting:o},e.createElement(ya,{...t,data:o?[]:t.data}),o&&e.createElement(mo,{alertLabel:null!==(n=t.exportDialogLabel)&&void 0!==n?n:"Export progress",cancelLabel:null!==(r=t.cancelExportLabel)&&void 0!==r?r:"Cancel data export",failed:!1,onCancel:a,open:o,progress:t.processedRows,total:s})))})),ya=Qr((t=>{var n;const{CellComponent:r,columnsHidable:i,data:o,emptyPlaceholderRenderer:s,hasMoreItems:a,headerContent:l,headerTitle:u,loadMoreButtonCaption:c,numberOfItems:d,page:h,pageSize:f,paginationType:p,paging:v,pagingPosition:g,preview:m,selectActionHelper:_,setPage:y,visibleColumns:b}=t,w=!!l,S=v&&("top"===g||"both"===g),E=v?e.createElement(mi,{canNextPage:a,canPreviousPage:0!==h,gotoPage:e=>y&&y((()=>e)),nextPage:()=>y&&y((e=>e+1)),numberOfItems:d,page:h,pageSize:f,showPagingButtons:t.showPagingButtons,previousPage:()=>y&&y((e=>e-1)),pagination:p}):null,x=function(e,t){const n=e.map((e=>e.getCssWidth())),r=[];t.selectItemColumn&&r.push("48px");r.push(...n),t.visibilitySelectorColumn&&r.push("54px");return{gridTemplateColumns:r.join(" ")}}(b,{selectItemColumn:_.showCheckboxColumn,visibilitySelectorColumn:i}),P="None"!==_.selectionType;return e.createElement(e.Fragment,null,S&&e.createElement(Li,null,E),w&&e.createElement(Mi,{headerTitle:u},l),e.createElement(Ii,null,e.createElement(Pi,{"aria-multiselectable":P?"Multi"===_.selectionType:void 0,style:x,setPage:y,paginationType:p,hasMoreItems:a},e.createElement(ma,{availableColumns:t.availableColumns,columns:b,setIsResizing:t.setIsResizing,columnsDraggable:t.columnsDraggable,columnsFilterable:t.columnsFilterable,columnsHidable:t.columnsHidable,columnsResizable:t.columnsResizable,columnsSortable:t.columnsSortable,columnsSwap:t.columnsSwap,filterRenderer:t.filterRenderer,headerWrapperRenderer:t.headerWrapperRenderer,id:t.id,isLoading:t.columnsLoading,preview:t.preview}),e.createElement(ki,{isLoading:t.isLoading,isFetchingNextBatch:t.isFetchingNextBatch,loadingType:t.loadingType,columnsHidable:i,columnsSize:b.length,rowsSize:o.length,pageSize:f},e.createElement(So,{preview:null!==(n=t.preview)&&void 0!==n&&n,interactive:t.gridInteractive,Cell:r,columns:b,columnsHidable:i,rows:o,rowClass:t.rowClass,selectableWrapper:t.headerWrapperRenderer,selectActionHelper:_,focusController:t.focusController,eventsController:t.cellEventsController,pageSize:t.pageSize}),(0===o.length||m)&&s&&s((t=>e.createElement("div",{key:"row-footer",className:si("td",{"td-borders":!m}),style:{gridColumn:"span ".concat(b.length+(i?1:0)+(_.showCheckboxColumn?1:0))}},e.createElement("div",{className:"empty-placeholder"},t))))))),e.createElement(Ni,{pagination:E,pagingPosition:g,paginationType:p,loadMoreButtonCaption:c,hasMoreItems:a,setPage:y}))}));var ba,wa;function Sa(e){return{hasError:!0,error:e}}function Ea(e){return{hasError:!1,value:e}}!function(e){e[e.EMISSINGSTORE=2]="EMISSINGSTORE",e[e.ENOCONTEXT=1]="ENOCONTEXT",e[e.ESTORETYPE=3]="ESTORETYPE",e[e.EKEYMISSING=7]="EKEYMISSING",e[e.OPTIONS_NOT_FILTERABLE=8]="OPTIONS_NOT_FILTERABLE"}(ba||(ba={})),Object.freeze({code:ba.ENOCONTEXT,message:"The filter widget must be placed inside the column or header of the Data grid 2.0 or inside header of the Gallery widget."}),Object.freeze({code:ba.EMISSINGSTORE,message:"Unable to get filter store. Check parent widget configuration."}),Object.freeze({code:ba.EKEYMISSING,message:"The key for filter is missing."}),Object.freeze({code:ba.OPTIONS_NOT_FILTERABLE,message:"Drop-down options can't be filtered with current column configuration. To enable filtering, change 'Option caption type'  to 'Attribute' in column settings."}),function(e){e.STRING="string",e.NUMBER="number",e.ENUMERATION="enum",e.DATE="date"}(wa||(wa={}));const xa="com.mendix.widgets.web.filterable.filterContext.v2";function Pa(){var t,n;return null!==(n=(t=window)[xa])&&void 0!==n?n:t[xa]=e.createContext(null)}const Ca=(void 0===window[y]&&(window[y]=e.createContext(void 0)),window[y]),Oa=Pa();function Aa(t){return e.createElement(Oa.Provider,{value:t.filtersStore.context},t.children)}function Ta(t){const n=function(t){const n=e.useCallback((()=>{"Multi"===(null==t?void 0:t.type)&&("all"===t.selectionStatus?t.selectNone():t.selectAll())}),[t]),r="Multi"===(null==t?void 0:t.type)?t.selectionStatus:void 0;return e.useMemo((()=>{if(void 0!==r)return{status:r,toggle:n}}),[r,n])}(t.selectionHelper);return e.createElement(Ca.Provider,{value:n},t.children)}const ka=e.memo((function(t){return e.createElement(Aa,{filtersStore:t.filtersStore},e.createElement(Ta,{selectionHelper:t.selectionHelper},t.children))}));ka.displayName="WidgetHeaderContext";const Ra=ka;class Ia extends b{constructor(e,t,n,r,i,o){super(e,t),_defineProperty(this,"_selectionMode",void 0),_defineProperty(this,"pageSize",void 0),_defineProperty(this,"_selectionMethod",void 0),_defineProperty(this,"_showSelectAllToggle",void 0),this._selectionMode=o,this._selectionMethod=n,this._showSelectAllToggle=r,this.pageSize=i}get selectionMethod(){return"None"===this.selectionType?"none":this._selectionMethod}get showCheckboxColumn(){return"checkbox"===this.selectionMethod}get showSelectAllToggle(){return this._showSelectAllToggle&&"Multi"===this.selectionType}get selectionMode(){return"checkbox"===this.selectionMethod?"toggle":this._selectionMode}}class Na{constructor(e,t){_defineProperty(this,"trigger",void 0),_defineProperty(this,"listAction",void 0),_defineProperty(this,"onExecuteAction",(e=>{this.listAction&&"get"in this.listAction&&c(this.listAction.get(e))})),this.trigger=e,this.listAction=t}get clickTrigger(){return this.listAction?this.trigger:"none"}update(e){this.listAction=e}}function Ma(e){return e.reduce(((e,t)=>{var n,r,i,o,s,a;switch(t.eventName){case"onClick":e.onClick=null!==(n=e.onClick)&&void 0!==n?n:[],e.onClick.push(t);break;case"onDoubleClick":e.onDoubleClick=null!==(r=e.onDoubleClick)&&void 0!==r?r:[],e.onDoubleClick.push(t);break;case"onKeyDown":e.onKeyDown=null!==(i=e.onKeyDown)&&void 0!==i?i:[],e.onKeyDown.push(t);break;case"onKeyUp":e.onKeyUp=null!==(o=e.onKeyUp)&&void 0!==o?o:[],e.onKeyUp.push(t);break;case"onMouseDown":e.onMouseDown=null!==(s=e.onMouseDown)&&void 0!==s?s:[],e.onMouseDown.push(t);break;case"onFocus":e.onFocus=null!==(a=e.onFocus)&&void 0!==a?a:[],e.onFocus.push(t)}return e}),{})}function Da(e,t){const n=Ma(t);return{onClick(t){var r;null===(r=n.onClick)||void 0===r||r.forEach((n=>La(e,t,n)))},onDoubleClick(t){var r;null===(r=n.onDoubleClick)||void 0===r||r.forEach((n=>La(e,t,n)))},onKeyUp(t){var r;null===(r=n.onKeyUp)||void 0===r||r.forEach((n=>La(e,t,n)))},onKeyDown(t){var r;null===(r=n.onKeyDown)||void 0===r||r.forEach((n=>La(e,t,n)))},onMouseDown(t){var r;null===(r=n.onMouseDown)||void 0===r||r.forEach((n=>La(e,t,n)))},onFocus(t){var r;null===(r=n.onFocus)||void 0===r||r.forEach((n=>La(e,t,n)))}}}function La(e,t,n){const r=e();(!n.filter||n.filter(r,t))&&n.handler(r,t)}const Fa=e=>({eventName:"onClick",filter:(e,t)=>"single"===e.clickTrigger&&"none"===e.selectionMethod||"single"===e.clickTrigger&&"checkbox"===e.selectionMethod&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;return e(n)}}),ja=e=>({eventName:"onDoubleClick",filter:(e,t)=>"none"===e.selectionMethod?"double"===e.clickTrigger:"double"===e.clickTrigger&&!t.metaKey&&!t.ctrlKey,handler:t=>{let{item:n}=t;return e(n)}}),Va=(e,t)=>"Space"===t.code&&"none"!==e.clickTrigger?!t.shiftKey||"none"===e.selectionMethod:"Enter"===t.code&&"none"!==e.clickTrigger,za=e=>{let t=!1;return[{eventName:"onKeyDown",filter:Va,handler:()=>t=!0},{eventName:"onKeyUp",filter:(e,n)=>Va(e,n)&&t,handler:n=>{let{item:r}=n;t=!1,e(r)}}]};function Ha(e){return[Fa(e),ja(e),(t=e=>{e.preventDefault(),e.stopPropagation()},{eventName:"onKeyDown",filter:(e,t)=>function(e){return"Space"===e.code&&e.target===e.currentTarget}(t),handler:(e,n)=>t(n)}),...za(e)];var t}function Ba(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges()}function Ka(){document.body.style.userSelect="none"}const qa=()=>{qa.timeoutId&&clearTimeout(qa.timeoutId),qa.timeoutId=window.setTimeout((()=>{Ba(),document.body.style.userSelect="",qa.timeoutId=void 0}),250)},Wa=e=>({eventName:"onClick",filter:(e,t)=>"rowClick"===e.selectionMethod?"single"!==e.clickTrigger:"checkbox"===e.selectionMethod&&(t.metaKey||t.ctrlKey),handler:(t,n)=>{let{item:r,selectionMode:i}=t,o=!1;o||(o="toggle"===i),o||(o=n.metaKey),o||(o=n.ctrlKey),e(r,n.shiftKey,o)}}),Ua=e=>({eventName:"onKeyUp",filter:(e,t)=>"none"!==e.selectionMethod&&function(e){return"Space"===e.code&&e.shiftKey}(t),handler:t=>{let{item:n}=t;return e(n,!1,!0)}});const Ga=e=>({eventName:"onClick",handler:(t,n)=>e({type:"Mouse",reactEvent:n})}),Ja=e=>({eventName:"onKeyDown",handler:(t,n)=>e({type:"Keyboard",reactEvent:n})}),Xa=e=>({eventName:"onFocus",handler:(t,n)=>e({type:"Focus",reactEvent:n})});function Za(e){return[Ga(e),Ja(e),Xa(e)]}class $a{constructor(e){_defineProperty(this,"entries",void 0),this.entries=e}getClickEntry(){const{onClick:e=[],onDoubleClick:t=[]}=Ma(this.entries);let n=0;return{eventName:"onClick",handler:(r,i)=>{Date.now()-n>320?(e.forEach((e=>this.runEntry(e,r,i))),n=Date.now()):(t.forEach((e=>this.runEntry(e,r,i))),n=0)}}}runEntry(e,t,n){var r,i;(null===(r=null===(i=e.filter)||void 0===i?void 0:i.call(e,t,n))||void 0===r||r)&&e.handler(t,n)}}class Ya{constructor(e,t,n,r,i,o){_defineProperty(this,"contextFactory",void 0),_defineProperty(this,"selectFx",void 0),_defineProperty(this,"selectAllFx",void 0),_defineProperty(this,"selectAdjacentFx",void 0),_defineProperty(this,"executeActionFx",void 0),_defineProperty(this,"focusTargetFx",void 0),this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.selectAdjacentFx=r,this.executeActionFx=i,this.focusTargetFx=o}getProps(e){return Da((()=>this.contextFactory(e)),this.getEntries())}getEntries(){const e=[...(t=this.selectFx,n=this.selectAllFx,r=this.selectAdjacentFx,[(i=Ba,{eventName:"onMouseDown",filter:e=>"none"!==e.selectionMethod,handler:i}),Wa(t),Ua(t),g((()=>{Ka(),n("selectAll")}),(()=>qa())),_(r)].flat()),...Ha(this.executeActionFx),...Za(this.focusTargetFx)];var t,n,r,i;const o=e.filter((e=>"onClick"===e.eventName||"onDoubleClick"===e.eventName)),s=e.filter((e=>"onClick"!==e.eventName&&"onDoubleClick"!==e.eventName));return[new $a(o).getClickEntry(),...s]}}const Qa=e=>({eventName:"onClick",filter:e=>"checkbox"===e.selectionMethod,handler:(t,n)=>{let{item:r}=t;return e(r,n.shiftKey,!0)}});function el(e,t,n){return[Qa(e),..._(n),...g((()=>{Ka(),t("selectAll")}),(()=>qa()))]}class tl{constructor(e,t,n,r,i){_defineProperty(this,"contextFactory",void 0),_defineProperty(this,"selectFx",void 0),_defineProperty(this,"selectAllFx",void 0),_defineProperty(this,"selectAdjacentFx",void 0),_defineProperty(this,"focusTargetFx",void 0),_defineProperty(this,"getProps",(e=>Da((()=>this.contextFactory(e)),[...el(this.selectFx,this.selectAllFx,this.selectAdjacentFx),...Za(this.focusTargetFx)]))),this.contextFactory=e,this.selectFx=t,this.selectAllFx=n,this.selectAdjacentFx=r,this.focusTargetFx=i}}class nl{constructor(e,t){_defineProperty(this,"_listeners",void 0),_defineProperty(this,"_focusTarget",void 0),_defineProperty(this,"_positionController",void 0),_defineProperty(this,"_layout",void 0),_defineProperty(this,"dispatch",(e=>{const t=this._positionController.dispatch(e,this._layout);void 0!==t&&t!==this._focusTarget&&("Keyboard"===e.type?this._setTargetAndFocus(t):this._setTarget(t))})),this._listeners=[],this._focusTarget=this._getInitPosition(),this._positionController=e,this._layout=t}get focusTarget(){return this._focusTarget}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners.splice(this._listeners.indexOf(e),1)}updateGridLayout(e){this._layout=e,void 0===this._layout.get(fi(this._focusTarget))&&this._setTarget(this._getInitPosition())}_setTarget(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!1})}_setTargetAndFocus(e){const t=this._focusTarget;this._focusTarget=e,this._emit({lastPos:t,targetPos:e,shouldFocus:!0})}_emit(e){for(const t of this._listeners)t(e)}_getInitPosition(){return hi(0,0)}}class rl{constructor(e,t,n){_defineProperty(this,"rows",void 0),_defineProperty(this,"columns",void 0),_defineProperty(this,"pageSize",void 0),_defineProperty(this,"_positions",void 0),this.columns=t,this.rows=e,this.pageSize=n,this._positions=new Set;for(let n=0;n<e;n+=1)for(let e=0;e<t;e+=1)this._positions.add(hi(e,n))}get(e){let[t,n]=e;const r=hi(t<0?this.columns+t:t,n<0?this.rows+n:n);if(this._positions.has(r))return r}}const il=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft","PageUp","PageDown","End","Home"]);const ol={ArrowUp:function(e){let[t,n]=e;return[t,Math.max(0,n-1)]},ArrowRight:function(e){let[t,n]=e;return[t+1,n]},ArrowDown:function(e){let[t,n]=e;return[t,n+1]},ArrowLeft:function(e){let[t,n]=e;return[Math.max(0,t-1),n]},PageUp:(e,t)=>function(e,t){let[n,r]=e;return[n,Math.max(0,r-t)]}(e,t.pageSize),PageDown:(e,t)=>function(e,t,n){let[r,i]=e;return[r,Math.min(n-1,i+t)]}(e,t.pageSize,t.rows),End:(e,t,n)=>{let{ctrlKey:r}=n;return r?[-1,-1]:function(e){let[t,n]=e;return[-1,n]}(e)},Home:(e,t,n)=>{let{ctrlKey:r}=n;return r?[0,0]:function(e){let[t,n]=e;return[0,n]}(e)}};class sl{dispatch(e,t){return"Focus"===e.type?this._handleFocusEvent(e.reactEvent):"Mouse"===e.type?this._handleMouseEvent(e.reactEvent):this._handleKeyboardEvent(e.reactEvent,t)}_handleKeyboardEvent(e,t){if(n=e.code,!il.has(n))return;var n;if(!Object.hasOwn(ol,e.code))throw new Error("Keyboard nav: can't find handler for ".concat(e.code," key"));e.preventDefault();const r=fi(this._getTargetPosition(e));return t.get(ol[e.code](r,t,e))}_handleMouseEvent(e){return this._getTargetPosition(e)}_handleFocusEvent(e){return this._getTargetPosition(e)}_getTargetPosition(e){var t;const n=null===(t=e.currentTarget.dataset)||void 0===t?void 0:t.position;if(void 0===n)throw new Error("Keyboard navigation: target position is missing");return n}}const al=Object.freeze({reset:{value:"reset.value",filters:"reset.filters"},set:{value:"set.value"}});let ll=()=>({emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let t=0,r=this.events[e]||[],i=r.length;t<i;t++)r[t](...n)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var n;this.events[e]=null===(n=this.events[e])||void 0===n?void 0:n.filter((e=>t!==e))}}});const ul="com.mendix.widgets.web.plugin.externalEvents";class cl{constructor(){_defineProperty(this,"channels",void 0),_defineProperty(this,"id",Math.random().toString().slice(2)),this.channels=new Map}disposeChannel(e){const t=this.channels.get(e);return t&&(t.events={}),this.channels.delete(e)}getChannel(e){let t=this.channels.get(e);return t||(t=ll(),this.channels.set(e,t),t)}emit(e,t){for(var n,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];null===(n=this.channels.get(e))||void 0===n||n.emit(t,...i)}subscribe(e,t,n){return this.getChannel(e).on(t,n),()=>this.unsubscribe(e,t,n)}unsubscribe(e,t,n){const r=this.channels.get(e);if(!r)return;const i=r.events[t];i&&(r.events[t]=i.filter((e=>e!==n)));0===Object.values(r.events).flat().reduce(((e,t)=>t?e+1:e),0)&&this.disposeChannel(e)}}function dl(){var e,t;return null!==(t=(e=window)[ul])&&void 0!==t?t:e[ul]=function(){if(Object.prototype.hasOwnProperty.call(window,ul))throw new Error("Widget plugin external events: plugin already initialized!");return new cl}()}const hl=function(){return dl().emit(...arguments)};function fl(t){var n,r,i;n=t.inputChannel,r=t.event,i=e.useRef((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.onEvent(hl,n)})).current,e.useEffect((()=>{if(void 0!==n)return dl().subscribe(n,r,i)}),[n,r])}class pl{constructor(e){_defineProperty(this,"atom",void 0),this.atom=e,zn(this,{props:rt})}get props(){return this.atom.props}}class vl{constructor(e){_defineProperty(this,"props",void 0),this.props=e,zn(this,{props:Qe.ref,setProps:nn})}setProps(e){this.props=e}}class gl{constructor(e){_defineProperty(this,"atom",void 0),_defineProperty(this,"gate",void 0),this.atom=new vl(e),this.gate=new pl(this.atom)}setProps(e){this.atom.setProps(e)}}class ml extends gl{constructor(e,t){super(e),_defineProperty(this,"locked",void 0),this.locked=t}setProps(e){this.locked()||super.setProps(e)}}function _l(t){var n,r;return null!==(r=(n=e.useRef(null)).current)&&void 0!==r?r:n.current="function"==typeof t?t():t}class yl{constructor(){_defineProperty(this,"exporting",!1),_defineProperty(this,"lengthComputable",!1),_defineProperty(this,"loaded",0),_defineProperty(this,"total",0),_defineProperty(this,"onloadstart",(e=>{this.exporting=!0,this.lengthComputable=e.lengthComputable,this.total=e.total,this.loaded=0})),_defineProperty(this,"onprogress",(e=>{this.loaded=e.loaded})),_defineProperty(this,"onloadend",(()=>{this.exporting=!1,this.lengthComputable=!1,this.loaded=0,this.total=0})),Bn(this)}}const bl=(e,t)=>Object.hasOwn(e,t);function wl(e){return bl(e,"arg1")&&bl(e,"arg2")}function Sl(e){return"function"===e.type&&"and"===e.name}function El(e){return"function"===e.type&&"or"===e.name}function xl(e){return wl(e)&&"literal"===e.arg2.type&&"="===e.name&&"undefined"===e.arg2.valueType}function Pl(e){return wl(e)&&"literal"===e.arg2.type&&"!="===e.name&&"undefined"===e.arg2.valueType}function Cl(e){return n.equals(n.literal(e),n.literal(e))}function Ol(e){const[t,r]=[(i=e).flatMap(((e,t)=>void 0===e?[]:[t])),i.filter((e=>void 0!==e))];var i;const o=[e.length,t],s=Cl((a=o,JSON.stringify(a)));var a;const l=Cl("_");return n.and(s,l,...r)}function Al(e){if(!Sl(e))return[];const[t]=e.args,n=function(e){return"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&/string/i.test(e.arg1.valueType)&&/string/i.test(e.arg2.valueType)&&e.arg1.value===e.arg2.value}(t)?function(e){let t,n;try{[t,n]=JSON.parse(e)}catch{return}if("number"==typeof t&&Array.isArray(n)&&n.every((e=>"number"==typeof e)))return[t,n]}(t.arg1.value):void 0;if(!n)return[];const[r,i]=n,o=Array(r).fill(void 0);return e.args.slice(2).forEach(((e,t)=>{o[i[t]]=e})),o}function Tl(e,t,n){return El(e)?Tl(e.args[0],t,n):Sl(e)?kl(e,t,n):Rl(e,t,n)}function kl(e,t,n){const[r,i]=e.args,[o,s]=[Il(r,n),Il(i,n)];return o&&s?[t("between"),o,s]:null}function Rl(e,t,n){const r=Il(e,n);return null===r?null:xl(e)?[t("empty"),r]:Pl(e)?[t("notEmpty"),r]:[t(e.name),r]}function Il(e,t){return wl(e)?"literal"!==e.arg2.type?null:t(e.arg2):null}function Nl(e,t){const n=(e,r)=>{if("or"===r.name)return r.args.reduce(n,e);if("="===r.name||"contains"===r.name){const n=Il(r,t);null!=n&&e.push(n)}return e};return[e].reduce(n,[])}function Ml(e){return[e].flatMap((e=>"or"===e.name?e.args.flatMap(Ml):"="===e.name||"contains"===e.name?[e]:[]))}class Dl{constructor(e,t){_defineProperty(this,"_value",void 0),_defineProperty(this,"isValid",!0),_defineProperty(this,"_formatter",void 0),_defineProperty(this,"_lastSetTextValue",""),this._formatter=e,this._value=t,zn(this,{_value:Qe,value:rt,isValid:Qe,_lastSetTextValue:Qe,displayValue:rt,_formatter:Qe.ref})}updateProps(e){this._formatter=e}set value(e){this._value=e,this._lastSetTextValue="",this.isValid=!0}get value(){return this._value}get displayValue(){var e,t;return this.isValid?(null===(e=this._formatter)||void 0===e?void 0:e.format(this.value))||(null===(t=this.value)||void 0===t?void 0:t.toString())||"":this._lastSetTextValue}set displayValue(e){var t;this._lastSetTextValue=e;const n=null===(t=this._formatter)||void 0===t?void 0:t.parse(this._lastSetTextValue);this.isValid=n.valid,n.valid&&!this.equals(this._value,n.value)&&(this._value=n.value)}equals(e,t){throw new Error("equals not implemented")}}class Ll extends Dl{constructor(){super(...arguments),_defineProperty(this,"type","number")}equals(e,t){return Object.is(e,t)||!!(e&&t&&e.eq(t))}}class Fl extends Dl{constructor(){super(...arguments),_defineProperty(this,"type","date")}equals(e,t){return Object.is(e,t)||!(!e||!t||+e!=+t)}}class jl extends Dl{constructor(){super(...arguments),_defineProperty(this,"type","string")}equals(e,t){return e===t}}class Vl{constructor(e,t,n,r){_defineProperty(this,"_attributes",[]),_defineProperty(this,"_filterFunction",void 0),_defineProperty(this,"_isFilterFunctionAdjustable",!0),_defineProperty(this,"arg1",void 0),_defineProperty(this,"arg2",void 0),_defineProperty(this,"isInitialized",!1),_defineProperty(this,"defaultState",void 0),_defineProperty(this,"UNSAFE_setDefaults",((e,t)=>{this.defaultState=e,t||(this.filterFunction=this.defaultState[0],this._isFilterFunctionAdjustable=!1),this.isInitialized||(this.setState(e),this.isInitialized=!0)})),_defineProperty(this,"reset",(()=>{[this._filterFunction,this.arg1.value,this.arg2.value]=this.defaultState})),_defineProperty(this,"clear",(()=>{this.setState([this.filterFunction])})),this._attributes=r,this.defaultState=[n],this._filterFunction=n,this.arg1=e,this.arg2=t,zn(this,{_attributes:Qe.ref,_filterFunction:Qe,_isFilterFunctionAdjustable:Qe,isInitialized:Qe,condition:rt,setState:nn,UNSAFE_setDefaults:nn,UNSAFE_overwriteFilterFunction:nn,filterFunction:rt})}get filterFunction(){return this._filterFunction}set filterFunction(e){this._isFilterFunctionAdjustable&&(this._filterFunction=e)}UNSAFE_overwriteFilterFunction(e){this._filterFunction=e}setState(e){[this.filterFunction,this.arg1.value,this.arg2.value]=e}get condition(){const e=this._attributes.map((e=>function(e,t,r,i){if(!e||!e.filterable||"empty"!==i&&"notEmpty"!==i&&!t||"between"===i&&(!t||!r))return;if("between"===i)return n.and(n.greaterThan(n.attribute(e.id),n.literal(t)),n.lessThan(n.attribute(e.id),n.literal(r)));return{contains:n.contains,startsWith:n.startsWith,endsWith:n.endsWith,greater:n.greaterThan,greaterEqual:n.greaterThanOrEqual,equal:n.equals,notEqual:n.notEqual,smaller:n.lessThan,smallerEqual:n.lessThanOrEqual,empty:n.equals,notEmpty:n.notEqual}[i](n.attribute(e.id),n.literal("empty"===i||"notEmpty"===i?void 0:t))}(e,this.arg1.value,this.arg2.value,this.filterFunction))).filter((e=>void 0!==e));return(null==e?void 0:e.length)>1?n.or(...e):null==e?void 0:e[0]}unpackJsonData(e){if(Array.isArray(e)&&3===e.length)return e}}class zl extends Vl{constructor(e,t){const{formatter:n}=e[0];super(new Fl(n),new Fl(n),"equal",e),_defineProperty(this,"storeType","input"),_defineProperty(this,"type","date"),_defineProperty(this,"rangeMarkerTag","__RANGE_MARKER__"),_defineProperty(this,"computedState",void 0),_defineProperty(this,"mapFn",(e=>{switch(e){case"day:=":default:return"equal";case"day:!=":return"notEqual";case"day:<":return"smaller";case"day:<=":return"smallerEqual";case"day:>":return"greater";case"day:>=":return"greaterEqual"}})),zn(this,{updateProps:nn,computedState:Qe.shallow,fromViewState:nn,fromJSON:nn}),t&&this.fromViewState(t),this.computedState=[this.filterFunction,this.arg1.value,this.arg2.value],this.setupComputeValues()}get condition(){const e=this._attributes.flatMap((e=>this.getCondition(e,...this.computedState)));switch(e.length){case 0:return;case 1:return e[0];default:return n.or(...e)}}setup(){const e=[];return e.push(this.setupComputeValues()),()=>e.forEach((e=>e()))}updateProps(e){if(!fe.shallow(this._attributes,e)){var t;this._attributes=e;const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}}setupComputeValues(){return cn((()=>[this.filterFunction,this.arg1.value,this.arg2.value]),(e=>{const[t,n,r]=e;"between"===t&&n instanceof Date&&void 0===r||(this.computedState=e)}),{equals:fe.shallow})}isRange(e){const[t,n]=Array.isArray(e)?e:[];return t instanceof Date&&n instanceof Date}getCondition(e,t,n,r){if(!e.filterable)return[];if("between"===t){const t=[n,r];return this.isRange(t)?this.getRangeCondition(e,t):[]}return this.getAttrCondition(e,t,n)}getAttrCondition(e,t,r){const[i,o]=[n.attribute(e.id),n.literal(r)];if("empty"===t)return[n.equals(i,n.literal(void 0))];if("notEmpty"===t)return[n.notEqual(i,n.literal(void 0))];if(void 0===r)return[];switch(t){case"greater":return[n.dayGreaterThan(i,o)];case"greaterEqual":return[n.dayGreaterThanOrEqual(i,o)];case"equal":return[n.dayEquals(i,o)];case"notEqual":return[n.dayNotEqual(i,o)];case"smaller":return[n.dayLessThan(i,o)];case"smallerEqual":return[n.dayLessThanOrEqual(i,o)];default:return[]}}getRangeCondition(e,t){let[r,i]=t;const o=n.attribute(e.id);return[n.and(n.dayGreaterThanOrEqual(o,n.literal(r)),n.dayLessThan(o,n.literal(Bl(i))),this.getRangeCondMarker())]}rangeExpToState(e){const t=kl(e,(()=>"between"),(e=>"DateTime"===e.valueType?e.value:void 0));if(null===t)return null;const[n,r,i]=t;return[n,r,i?Kl(i):void 0]}getRangeCondMarker(){return n.equals(n.literal(this.rangeMarkerTag),n.literal(this.rangeMarkerTag))}isRangeMarker(e){return!!e&&("function"===e.type&&"="===e.name&&"literal"===e.arg1.type&&"literal"===e.arg2.type&&e.arg1.value===this.rangeMarkerTag&&e.arg2.value===this.rangeMarkerTag)}toJSON(){if(this.isInitialized)return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,i]=t;this.setState([n,Hl(r),Hl(i)]),this.isInitialized=!0}fromViewState(e){const t=e=>"DateTime"===e.valueType?e.value:void 0,n=(e=>(El(e)&&(e=e.args[0]),xl(e)?["empty",void 0,void 0]:Pl(e)?["notEmpty",void 0,void 0]:Sl(e)&&this.isRangeMarker(e.args.at(2))?this.rangeExpToState(e):Rl(e,this.mapFn,t)))(e);n&&(this.setState(n),this.isInitialized=!0)}}function Hl(e){if(null===e)return;const t=new Date(e);return"Invalid Date"===t.toString()?void 0:t}function Bl(e){const t=new Date(e.getTime());return t.setUTCDate(t.getUTCDate()+1),t}function Kl(e){const t=new Date(e.getTime());return t.setUTCDate(t.getUTCDate()-1),t}function ql(e){switch(e){case"=":default:return"equal";case"!=":return"notEqual";case">":return"greater";case">=":return"greaterEqual";case"<":return"smaller";case"<=":return"smallerEqual";case"between":case"empty":case"notEmpty":return e}}class Wl extends Vl{constructor(e,t){let{formatter:n}=e[0];n=function(e){var t;if(!1===(null===(t=e.parse("none"))||void 0===t?void 0:t.valid))return e;return{format:e=>e?e.toString():e,parse:e=>{try{return{valid:!0,value:new r.Big(e)}}catch{return""===e?{valid:!0,value:void 0}:{valid:!1}}}}}(n),super(new Ll(n),new Ll(n),"equal",e),_defineProperty(this,"storeType","input"),_defineProperty(this,"type","number"),zn(this,{updateProps:nn,fromJSON:nn,fromViewState:nn}),t&&this.fromViewState(t)}updateProps(e){fe.shallow(this._attributes,e)||(this._attributes=e)}toJSON(){if(this.isInitialized)return[this.filterFunction,this.arg1.value?this.arg1.value.toJSON():null,this.arg2.value?this.arg2.value.toJSON():null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,i]=t;this.setState([n,Ul(r),Ul(i)]),this.isInitialized=!0}fromViewState(e){const t=Tl(e,(e=>ql(e)),(e=>"Numeric"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}function Ul(e){try{return new r.Big(null!=e?e:"")}catch{return}}class Gl extends Vl{constructor(e,t){const{formatter:n}=e[0];super(new jl(n),new jl(n),"equal",e),_defineProperty(this,"storeType","input"),_defineProperty(this,"type","string"),zn(this,{updateProps:nn,fromJSON:nn,fromViewState:nn}),t&&this.fromViewState(t)}updateProps(e){var t;fe.shallow(this._attributes,e)||(this._attributes=e);const n=null===(t=e.at(0))||void 0===t?void 0:t.formatter;this.arg1.updateProps(n),this.arg2.updateProps(n)}toJSON(){var e,t;if(this.isInitialized)return[this.filterFunction,null!==(e=this.arg1.value)&&void 0!==e?e:null,null!==(t=this.arg2.value)&&void 0!==t?t:null]}fromJSON(e){const t=this.unpackJsonData(e);if(!t)return;const[n,r,i]=t;this.setState([n,r||void 0,i||void 0]),this.isInitialized=!0}fromViewState(e){const t=Tl(e,(e=>"contains"===e?"contains":"starts-with"===e?"startsWith":"ends-with"===e?"endsWith":ql(e)),(e=>"string"===e.valueType?e.value:void 0));t&&(this.setState(t),this.isInitialized=!0)}}function Jl(){const e=[];return[e,()=>{e.forEach((e=>e())),e.length=0}]}const Xl=new Set(["empty","notEmpty","equal","notEqual","greater","greaterEqual","smaller","smallerEqual","between","contains","startsWith","endsWith"]);class Zl{constructor(){_defineProperty(this,"defaultSelected",[]),_defineProperty(this,"blockSetDefaults",!1),_defineProperty(this,"selected",new Set),zn(this,{selected:Qe.struct,clear:nn,reset:nn,toggle:nn,setSelected:nn,fromJSON:nn})}setSelected(e){this.selected=new Set(e)}clear(){this.setSelected([])}reset(){this.setSelected(this.defaultSelected)}toggle(e){const t=new Set(this.selected);this.setSelected(t.delete(e)?t:t.add(e))}toJSON(){return[...this.selected]}fromJSON(e){null===e||function(e){if(Array.isArray(e)){const[t]=e;return Xl.has(t)}return!1}(e)||(this.setSelected(e),this.blockSetDefaults=!0)}}class $l{constructor(){let{defaultValue:e="",delay:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_defineProperty(this,"delay",void 0),_defineProperty(this,"disposers",[]),_defineProperty(this,"defaultValue",void 0),_defineProperty(this,"value",void 0),_defineProperty(this,"buffer",void 0),this.defaultValue=e,this.buffer=this.value=this.defaultValue,this.delay=t,Bn(this,{setBuffer:nn,clear:nn,reset:nn})}setBuffer(e){this.buffer=e}reset(){this.buffer=this.value=this.defaultValue}clear(){this.buffer=this.value=""}setup(){return this.disposers.push(an((()=>{const e=this.buffer;on((()=>this.value=e))}),{delay:this.delay})),()=>this.disposers.forEach((e=>e()))}}class Yl extends Zl{constructor(e,t){super(),_defineProperty(this,"storeType","select"),_defineProperty(this,"_attributes",[]),_defineProperty(this,"_customOptions",[]),_defineProperty(this,"search",void 0),this.search=new $l,this._attributes=e,zn(this,{_attributes:Qe.struct,_customOptions:Qe.struct,allOptions:rt,options:rt,selectedOptions:rt,universe:rt,condition:rt,setCustomOptions:nn,setDefaultSelected:nn,updateProps:nn,fromViewState:nn}),t&&this.fromViewState(t)}get allOptions(){const e=this.selected;if(this._customOptions.length>0)return this._customOptions.map((t=>({...t,selected:e.has(t.value)})));const t=this._attributes.flatMap((t=>{var n;return Array.from(null!==(n=t.universe)&&void 0!==n?n:[],(n=>{const r="".concat(n);return{caption:t.formatter.format(n),value:r,selected:e.has(r)}}))}));return t}get options(){return this.search.value?this.allOptions.filter((e=>e.caption.toLowerCase().includes(this.search.value.toLowerCase()))):this.allOptions}get selectedOptions(){return[...this.selected].flatMap((e=>{const t=this.allOptions.find((t=>t.value===e));return t?[t]:[]}))}get universe(){return new Set(this._attributes.flatMap((e=>{var t;return Array.from(null!==(t=e.universe)&&void 0!==t?t:[],(e=>"".concat(e)))})))}get condition(){const e=this.selected,t=this._attributes.flatMap((t=>{const r=function(e,t){if(!e||!e.filterable||0===t.size)return;const{id:r,type:i}=e,o=n.attribute(r),s=[...t].filter((t=>{var n;return null===(n=e.universe)||void 0===n?void 0:n.includes(Ql(e.type,t))})).map((e=>n.equals(o,n.literal(Ql(i,e)))));if(s.length>1)return n.or(...s);const[a]=s;return a}(t,e);return r?[r]:[]}));return t.length>1?n.or(...t):t[0]}setup(){const[e,t]=Jl();return e.push(this.search.setup()),t}setCustomOptions(e){this._customOptions=e}setDefaultSelected(e){!this.blockSetDefaults&&e&&(this.defaultSelected=e,this.setSelected(e),this.blockSetDefaults=!0)}updateProps(e){this._attributes=e}checkAttrs(){return this._attributes.every((e=>/Enum|Boolean/.test(e.type)))?null:new TypeError("StaticSelectFilterStore: invalid attribute found. Check widget configuration.")}isValidValue(e){return this.universe.has(e)}fromViewState(e){const t=Nl(e,(e=>"string"===e.valueType?e.value:"boolean"===e.valueType?e.value?"true":"false":void 0));t.length<1||(this.setSelected(t),this.blockSetDefaults=!0)}}function Ql(e,t){return"Boolean"===e?"true"!==t&&"false"!==t?t:"true"===t:t}class eu{constructor(e,t){_defineProperty(this,"type","legacy"),_defineProperty(this,"_attrs",void 0),_defineProperty(this,"dispose",void 0),_defineProperty(this,"filterMap",void 0),_defineProperty(this,"filterList",void 0),_defineProperty(this,"get",(e=>this.filterMap[e])),this._attrs=e;const n=this.filterMap=function(e,t){const[n=null,r=null,i=null,o=null]=null!=t?t:[],[s,a,l,u]=tu(e);return{[wa.STRING]:s.length>0?new Gl(s,n):null,[wa.NUMBER]:a.length>0?new Wl(a,r):null,[wa.DATE]:l.length>0?new zl(l,i):null,[wa.ENUMERATION]:u.length>0?new Yl(u,o):null}}(e,t);this.filterList=[n[wa.STRING],n[wa.NUMBER],n[wa.DATE],n[wa.ENUMERATION]],zn(this,{_attrs:Qe.ref,conditions:rt,settings:rt,updateProps:nn})}get conditions(){return this.filterList.map((e=>e?e.condition:void 0))}get settings(){return new Map}set settings(e){}updateProps(e){this._attrs=e}updateFilters(e){const[t,n,r,i]=tu(e),[o,s,a,l]=this.filterList;null==o||o.updateProps(t),null==s||s.updateProps(n),null==a||a.updateProps(r),null==l||l.updateProps(i)}setup(){const e=[];return this.filterList.forEach((t=>{t&&"setup"in t&&e.push(t.setup())})),e.push(cn((()=>this._attrs),(e=>this.updateFilters(e)),{equals:fe.shallow})),this.dispose=()=>e.forEach((e=>e()))}}function tu(e){return[e.filter(iu),e.filter(ru),e.filter(nu),e.filter((e=>"Boolean"===e.type||function(e){return"Enum"===e.type}(e)))]}function nu(e){return"DateTime"===e.type}function ru(e){return"Long"===e.type||"Decimal"===e.type||"Integer"===e.type||"AutoNumber"===e.type}function iu(e){return"HashString"===e.type||"String"===e.type}class ou{constructor(e,t,n){var r;_defineProperty(this,"provider",void 0),_defineProperty(this,"context",void 0),this.provider=this.createProvider(e,n),this.context={version:2,parentChannelName:null!==(r=t.filtersChannelName)&&void 0!==r?r:"",provider:this.provider},zn(this,{conditions:rt,settings:rt})}get conditions(){return this.provider.hasError?[]:this.provider.value.conditions}get settings(){return this.provider.hasError?new Map:this.provider.value.settings}set settings(e){this.provider.hasError||(this.provider.value.settings=e)}createProvider(e,t){return Ea(new eu(e.filterList.map((e=>e.filter)),t))}setup(){if(!this.provider.hasError)return this.provider.value.setup()}updateProps(){}}function su(){const e=new Set;return[t=>{e.add(t)},()=>{for(const t of e)t();e.clear()}]}class au{constructor(){_defineProperty(this,"controllers",new Set),_defineProperty(this,"isSetupCalled",!1)}addController(e){this.controllers.add(e)}removeController(e){this.controllers.delete(e)}setup(){if(this.isSetupCalled)throw new Error("setup method has already been called.");this.isSetupCalled=!0;const[e,t]=su();for(const t of this.controllers){var n;const r=null===(n=t.setup)||void 0===n?void 0:n.call(t);r&&e(r)}return t}}class lu{constructor(e,t){_defineProperty(this,"gate",void 0),_defineProperty(this,"refreshing",!1),_defineProperty(this,"fetching",!1),_defineProperty(this,"pageSize",1/0),e.addController(this),this.gate=t.gate,Bn(this,{setup:!1,pageSize:!1,updateFlags:nn,resetFlags:nn,setRefreshing:nn,setFetching:nn})}resetFlags(){this.refreshing=!1,this.fetching=!1}updateFlags(e){this.refreshing&&this.setRefreshing("loading"===e),this.fetching&&this.setFetching("loading"===e)}setRefreshing(e){this.refreshing=e}setFetching(e){this.fetching=e}resetLimit(){this.datasource.setLimit(this.pageSize)}get isDSLoading(){return"loading"===this.datasource.status}get datasource(){return this.gate.props.datasource}get isLoading(){return!this.isRefreshing&&!this.isFetchingNextBatch&&this.isDSLoading}get isRefreshing(){return this.refreshing}get isFetchingNextBatch(){return this.fetching}get limit(){return this.datasource.limit}get offset(){return this.datasource.offset}get totalCount(){return this.datasource.totalCount}get computedCopy(){const[e]=[this.datasource].map((()=>Object.create(this)));return e}setup(){return an((()=>{this.updateFlags(this.datasource.status)}))}refresh(){this.isDSLoading||(this.setRefreshing(!0),this.datasource.reload())}requestTotalCount(e){this.datasource.requestTotalCount(e)}setLimit(e){this.setFetching(!0),this.datasource.setLimit(e)}setOffset(e){this.resetFlags(),this.resetLimit(),this.datasource.setOffset(e)}setSortOrder(){this.resetFlags(),this.resetLimit(),this.datasource.setSortOrder(...arguments)}setFilter(){this.resetFlags(),this.resetLimit(),this.datasource.setFilter(...arguments)}setPageSize(e){this.pageSize=e}}class uu{constructor(e){_defineProperty(this,"spec",void 0),this.spec=e,zn(this,{isLoading:rt,isFetchingNextBatch:rt,isRefreshing:rt})}get isLoading(){const{cols:e,exp:t,query:n}=this.spec;return!e.loaded||!t.exporting&&n.isLoading}get isFetchingNextBatch(){return this.spec.query.isFetchingNextBatch}get isRefreshing(){return this.spec.query.isRefreshing}}class cu{constructor(e,t){let{gate:n,query:r}=t;_defineProperty(this,"gate",void 0),_defineProperty(this,"query",void 0),_defineProperty(this,"pagination",void 0),_defineProperty(this,"paginationKind",void 0),_defineProperty(this,"showPagingButtons",void 0),_defineProperty(this,"showNumberOfRows",void 0),_defineProperty(this,"setPage",(e=>{const t=e(this.currentPage);this.isLimitBased?this.query.setLimit(t*this.pageSize):this.query.setOffset(t*this.pageSize)})),e.addController(this),this.gate=n,this.query=r,this.pagination=n.props.pagination,this.showPagingButtons=n.props.showPagingButtons,this.showNumberOfRows=n.props.showNumberOfRows,this.paginationKind="".concat(this.pagination,".").concat(this.showPagingButtons),this.setInitParams()}get isLimitBased(){return"virtualScrolling"===this.pagination||"loadMore"===this.pagination}get pageSize(){return this.gate.props.pageSize}get currentPage(){const{query:{limit:e,offset:t},pageSize:n}=this;return this.isLimitBased?e/n:t/n}get showPagination(){switch(this.paginationKind){case"buttons.always":return!0;case"buttons.auto":{const{totalCount:e=-1}=this.query;return e>this.query.limit}default:return this.showNumberOfRows}}setInitParams(){("buttons"===this.pagination||this.showNumberOfRows)&&this.query.requestTotalCount(!0),this.query.setPageSize(this.pageSize)}setup(){}}class du{constructor(e,t){_defineProperty(this,"query",void 0),_defineProperty(this,"delay",void 0),e.addController(this),this.query=t.query,this.delay=Math.max(t.delay,0)}setup(){if(!(this.delay<=0))return function(e,t){let n;const r=an((()=>{var t;null===(t=n)||void 0===t||t(),n=e()}),t);return()=>{var e;r(),null===(e=n)||void 0===e||e()}}((()=>this.scheduleRefresh(this.query.get(),this.delay)))}scheduleRefresh(e,t){const n=setTimeout((()=>{e.refresh()}),t);return()=>{clearTimeout(n)}}}class hu{constructor(e,t){_defineProperty(this,"columns",void 0),_defineProperty(this,"header",void 0),_defineProperty(this,"query",void 0),e.addController(this),this.columns=t.columns,this.header=t.header,this.query=t.query,Bn(this,{setup:!1})}get derivedFilter(){const{columns:e,header:t}=this;return n.and(Ol(e.conditions),Ol(t.conditions))}get derivedSortOrder(){return this.columns.sortInstructions}setup(){const[e,t]=su();return e(cn((()=>this.derivedSortOrder),(e=>this.query.setSortOrder(e)),{fireImmediately:!0})),e(cn((()=>this.derivedFilter),(e=>this.query.setFilter(e)),{fireImmediately:!0})),t}static unzipFilter(e){if(!e)return[[],[]];if(!Sl(e))return[[],[]];if(2!==e.args.length)return[[],[]];const[t,n]=e.args;return[Al(t),Al(n)]}}class fu{constructor(e){_defineProperty(this,"rules",[]),this.rules=e,zn(this,{rules:Qe.struct,toggleSort:nn})}getDirection(e){const t=this.rules.findIndex((t=>t[0]===e));if(-1===t)return;const[,n]=this.rules.at(t);return[n,t+1]}toggleSort(e){const[[t,n]=[]]=this.rules;this.rules=t&&t===e?"asc"!==n?[]:[[e,"desc"]]:[[e,"asc"]]}}class pu extends Zl{constructor(e,t){var n;super(),_defineProperty(this,"storeType","refselect"),_defineProperty(this,"optionsFilterable",void 0),_defineProperty(this,"datasource",void 0),_defineProperty(this,"listRef",void 0),_defineProperty(this,"caption",void 0),_defineProperty(this,"searchAttrId",void 0),_defineProperty(this,"initCondArray",void 0),_defineProperty(this,"pageSize",20),_defineProperty(this,"searchSize",100),_defineProperty(this,"fetchReady",!1),_defineProperty(this,"selectedItems",[]),_defineProperty(this,"lazyMode",void 0),_defineProperty(this,"search",void 0),this.caption=e.caption,this.datasource=e.datasource,this.listRef=e.ref,this.lazyMode=null===(n=e.fetchOptionsLazy)||void 0===n||n,this.searchAttrId=e.searchAttrId,this.initCondArray=t?Ml(t):[],this.search=new $l,this.optionsFilterable=!!this.searchAttrId,this.lazyMode&&this.datasource.setLimit(0),zn(this,{datasource:Qe.ref,listRef:Qe.ref,caption:Qe.ref,searchAttrId:Qe.ref,options:rt,hasMore:rt,isLoading:rt,condition:rt,updateProps:nn,fromViewState:nn,fetchReady:Qe,setFetchReady:nn,setDefaultSelected:nn,selectedItems:Qe.struct,selectedOptions:rt}),t&&this.fromViewState(t)}get hasMore(){var e;return null!==(e=this.datasource.hasMoreItems)&&void 0!==e&&e}get isLoading(){return"loading"===this.datasource.status}get options(){var e;return(null!==(e=this.datasource.items)&&void 0!==e?e:[]).map((e=>this.toOption(e)))}get selectedOptions(){return this.selectedItems.map((e=>this.toOption(e)))}toOption(e){return{caption:"".concat(this.caption.get(e).value),value:"".concat(e.id),selected:this.selected.has(e.id)}}get condition(){if(this.selected.size<1)return;const e=[...this.selected].flatMap((e=>{const t=this.selectedItems.find((t=>t.id===e));if(t&&"Reference"===this.listRef.type)return[vu(this.listRef,t)];if(t&&"ReferenceSet"===this.listRef.type)return[gu(this.listRef,[t])];const n=this.initCondArray.find((t=>"literal"===t.arg2.type&&("Reference"===t.arg2.valueType?t.arg2.value===e:"ReferenceSet"===t.arg2.valueType&&t.arg2.value.at(0)===e)));return n?[n]:[]}));return e.length>1?n.or(...e):e[0]}setup(){const[e,t]=Jl();return e.push(this.search.setup()),e.push(cn(...this.searchChangeFx())),e.push(an(...this.computeSelectedItemsFx())),this.lazyMode?e.push(kn((()=>this.fetchReady),(()=>this.loadMore()))):(this.setFetchReady(!0),this.loadMore()),t}searchChangeFx(){return[()=>this.search.value,e=>{if(!this.searchAttrId)return;const t="string"==typeof e&&""!==e?n.contains(n.attribute(this.searchAttrId),n.literal(e)):void 0;this.datasource.setFilter(t),this.datasource.setLimit(this.searchSize)},{delay:300}]}computeSelectedItemsFx(){return[()=>{var e;const t=[...this.selectedItems,...null!==(e=this.datasource.items)&&void 0!==e?e:[]],n=new Map(t.map((e=>[e.id,e]))),r=[...this.selected].flatMap((e=>{var t;return null!==(t=n.get(e))&&void 0!==t?t:[]}));on((()=>this.selectedItems=r))}]}setFetchReady(e){this.fetchReady||(this.fetchReady=e)}setDefaultSelected(e){!this.blockSetDefaults&&e&&(this.defaultSelected=e,this.blockSetDefaults=!0,this.setSelected(e))}updateProps(e){this.listRef=e.ref,this.datasource=e.datasource,this.caption=e.caption}loadMore(){this.datasource.setLimit(this.datasource.limit+this.pageSize)}fromViewState(e){const t=Nl(e,(e=>{switch(e.valueType){case"Reference":return e.value;case"ReferenceSet":return e.value.at(0);default:return}}));t.length>0&&(this.setSelected(t),this.blockSetDefaults=!0)}}function vu(e,t){return n.equals(n.association(e.id),n.literal(t))}function gu(e,t){const r=t.length?n.literal(t.slice()):n.empty();return n.contains(n.association(e.id),r)}function mu(e){if(null==e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Did not expect an argument to be undefined");return e}const{Provider:_u}=Pa();class yu{constructor(e,t,n){_defineProperty(this,"_widget",void 0),_defineProperty(this,"_filterStore",null),_defineProperty(this,"_context",void 0),this._widget=e.filter,this._filterStore=this.createFilterStore(e,n),this._context=this.createContext(this._filterStore,t),zn(this,{_updateStore:nn,condition2:rt,updateProps:nn})}setup(){const[e,t]=Jl();return this._filterStore&&"setup"in this._filterStore&&e.push(this._filterStore.setup()),t}updateProps(e){this._widget=e.filter,this._updateStore(e)}_updateStore(e){const t=this._filterStore;null!==t&&("refselect"===t.storeType?t.updateProps(this.toRefselectProps(e)):bu(e.attribute)&&t.updateProps([e.attribute]))}toRefselectProps(e){var t;const n=null===(t=e.filterAssociationOptionLabelAttr)||void 0===t?void 0:t.id,r="expression"===e.filterCaptionType?mu(e.filterAssociationOptionLabel,wu("filterAssociationOptionLabel")):mu(e.filterAssociationOptionLabelAttr,wu("filterAssociationOptionLabelAttr"));return{ref:mu(e.filterAssociation,wu("filterAssociation")),datasource:mu(e.filterAssociationOptions,wu("filterAssociationOptions")),searchAttrId:n,fetchOptionsLazy:e.fetchOptionsLazy,caption:r}}createFilterStore(e,t){return e.filterAssociation?new pu(this.toRefselectProps(e),t):bu(e.attribute)?function(e,t,n){switch(e){case"DateTime":return new zl(t,n);case"AutoNumber":case"Decimal":case"Integer":case"Long":return new Wl(t,n);case"String":case"HashString":return new Gl(t,n);case"Boolean":case"Enum":return new Yl(t,n);default:return console.error("attrgroupFilterStore: not supported type "+e,t),null}}(e.attribute.type,[e.attribute],t):null}createContext(e,t){return{version:2,parentChannelName:t.filtersChannelName,provider:Ea({type:"direct",store:e})}}renderFilterWidgets(){return e.createElement(_u,{value:this._context},this._widget)}get condition2(){return this._filterStore?this._filterStore.condition:void 0}get settings(){var e;return null===(e=this._filterStore)||void 0===e?void 0:e.toJSON()}set settings(e){var t,n;void 0===e?null===(t=this._filterStore)||void 0===t||t.reset():null===(n=this._filterStore)||void 0===n||n.fromJSON(e)}}const bu=e=>!(!e||!1!==e.isList),wu=e=>"Can't map ColumnsType to AssociationProperties: ".concat(e," is undefined");class Su{constructor(e){var t;_defineProperty(this,"alignment",void 0),_defineProperty(this,"sortable",void 0),_defineProperty(this,"resizable",void 0),_defineProperty(this,"draggable",void 0),_defineProperty(this,"hidable",void 0),_defineProperty(this,"initiallyHidden",void 0),_defineProperty(this,"wrapText",void 0),_defineProperty(this,"showContentAs",void 0),_defineProperty(this,"weight",void 0),_defineProperty(this,"width",void 0),_defineProperty(this,"minWidth",void 0),_defineProperty(this,"minWidthLimit",void 0),_defineProperty(this,"allowEventPropagation",void 0),this.alignment=e.alignment,this.sortable=e.sortable,this.resizable=e.resizable,this.draggable=e.draggable,this.hidable="no"!==e.hidable,this.initiallyHidden="hidden"===e.hidable,this.wrapText=e.wrapText,this.showContentAs=e.showContentAs,this.weight=null!==(t=e.size)&&void 0!==t?t:1,this.width=e.width,this.minWidth=e.minWidth,this.minWidthLimit=e.minWidthLimit,this.allowEventPropagation=e.allowEventPropagation}get columnWidth(){switch(this.width){case"autoFit":{const e="manual"===this.minWidth?"".concat(this.minWidthLimit,"px"):"minContent"===this.minWidth?"min-content":"auto";return"minmax(".concat(e,", auto)")}case"manual":return"".concat(this.weight,"fr");default:return"1fr"}}}class Eu{constructor(e,t,n){_defineProperty(this,"columnIndex",void 0),_defineProperty(this,"isHidden",void 0),_defineProperty(this,"size",void 0),_defineProperty(this,"orderWeight",void 0),_defineProperty(this,"headerElementRef",null),_defineProperty(this,"baseInfo",void 0),_defineProperty(this,"parentStore",void 0),_defineProperty(this,"frozenSize",void 0),_defineProperty(this,"_visible",void 0),_defineProperty(this,"_header",void 0),_defineProperty(this,"_columnClass",void 0),_defineProperty(this,"_tooltip",void 0),_defineProperty(this,"_attribute",void 0),_defineProperty(this,"_dynamicText",void 0),_defineProperty(this,"_content",void 0),this.parentStore=n,this.baseInfo=new Su(t),this.columnIndex=e,this.isHidden=this.baseInfo.initiallyHidden,this.orderWeight=10*e,zn(this,{_visible:Qe.ref,_header:Qe.ref,_columnClass:Qe.ref,_tooltip:Qe.ref,_attribute:Qe.ref,_dynamicText:Qe.ref,_content:Qe.ref,isHidden:Qe,size:Qe,orderWeight:Qe,updateProps:nn,toggleHidden:nn,setSize:nn,applySettings:nn,canSort:rt,header:rt,loaded:rt,settings:rt.struct}),this.updateProps(t)}updateProps(e){this._visible=e.visible,this._header=e.header,this._columnClass=e.columnClass,this._tooltip=e.tooltip,this._attribute=e.attribute,this._content=e.content,this._dynamicText=e.dynamicText}get alignment(){return this.baseInfo.alignment}get initiallyHidden(){return this.baseInfo.initiallyHidden}get wrapText(){return this.baseInfo.wrapText}get canDrag(){return this.baseInfo.draggable}get canHide(){return this.baseInfo.hidable}toggleHidden(){this.isHidden=!this.isHidden}get canResize(){return this.baseInfo.resizable&&!this.parentStore.isLastVisible(this)}setSize(e){this.size=e}get canSort(){var e;return this.baseInfo.sortable&&!(null===(e=this._attribute)||void 0===e||!e.sortable)}get sortDir(){var e;return null===(e=this.parentStore.sorting.getDirection(this.columnId))||void 0===e?void 0:e[0]}get sortWeight(){var e;return null===(e=this.parentStore.sorting.getDirection(this.columnId))||void 0===e?void 0:e[1]}toggleSort(){this.parentStore.sorting.toggleSort(this.columnId)}get columnId(){return this.columnIndex.toString()}get header(){var e,t;return null!==(e=null===(t=this._header)||void 0===t?void 0:t.value)&&void 0!==e?e:""}get isAvailable(){var e;return!this._visible||null!==(e=this._visible.value)&&void 0!==e&&e}get loaded(){return!this._visible||("loading"!==this._visible.status||void 0!==this._visible.value)}get attrId(){var e;return null===(e=this._attribute)||void 0===e?void 0:e.id}setHeaderElementRef(e){this.headerElementRef=e}takeSizeSnapshot(){var e;const t=null===(e=this.headerElementRef)||void 0===e?void 0:e.clientWidth;this.frozenSize=this.size,t&&this.setSize(t)}renderCellContent(t){switch(this.baseInfo.showContentAs){case"attribute":case"dynamicText":var n,r,i;return e.createElement("span",{className:"td-text",title:null===(n=this._tooltip)||void 0===n||null===(n=n.get(t))||void 0===n?void 0:n.value},"attribute"===this.baseInfo.showContentAs?null===(r=this._attribute)||void 0===r||null===(r=r.get(t))||void 0===r?void 0:r.displayValue:null===(i=this._dynamicText)||void 0===i||null===(i=i.get(t))||void 0===i?void 0:i.value);case"customContent":var o;return e.createElement(Cu,{allowEventPropagation:this.baseInfo.allowEventPropagation},null===(o=this._content)||void 0===o?void 0:o.get(t));default:throw new Error("Unknown content type: ".concat(this.baseInfo.showContentAs))}}columnClass(e){var t;return null===(t=this._columnClass)||void 0===t?void 0:t.get(e).value}getCssWidth(){return this.size?this.parentStore.isLastVisible(this)?"minmax(min-content, auto)":"".concat(this.size,"px"):this.baseInfo.columnWidth}get settings(){return{columnId:this.columnId,size:this.parentStore.isResizing?this.frozenSize:this.size,hidden:this.isHidden,orderWeight:this.orderWeight,sortDir:this.sortDir,sortWeight:this.sortWeight}}applySettings(e){this.size=e.size,this.canHide&&(this.isHidden=e.hidden),this.orderWeight=10*e.orderWeight}}const xu=e=>{e.stopPropagation()},Pu=e=>{"Tab"!==e.code&&e.stopPropagation()};function Cu(t){let{children:n,allowEventPropagation:r}=t;const i=r?{}:{onClick:xu,onKeyUp:xu,onKeyDown:Pu};return e.createElement("div",{className:"td-custom-content",...i},n)}class Ou{constructor(e,t,n){var r,i;_defineProperty(this,"_allColumns",void 0),_defineProperty(this,"_allColumnsById",new Map),_defineProperty(this,"columnFilters",void 0),_defineProperty(this,"sorting",void 0),_defineProperty(this,"isResizing",!1),this._allColumns=[],this.columnFilters=[],e.columns.forEach(((e,r)=>{var i;const o=null!==(i=null==n?void 0:n.at(r))&&void 0!==i?i:null,s=new Eu(r,e,this);this._allColumnsById.set(s.columnId,s),this._allColumns[r]=s,this.columnFilters[r]=new yu(e,t,o)})),this.sorting=new fu((r=e.datasource.sortOrder,i=this._allColumns,r&&r.length?r.map((e=>{var t;const[n,r]=e,o=null===(t=i.find((e=>e.attrId===n)))||void 0===t?void 0:t.columnId;if(o)return[o,r]})).filter((e=>!!e)):[])),zn(this,{_allColumns:Qe,isResizing:Qe,loaded:rt,_allColumnsOrdered:rt,availableColumns:rt,visibleColumns:rt,conditions:rt.struct,columnSettings:rt.struct,filterSettings:rt({keepAlive:!0}),updateProps:nn,setIsResizing:nn,swapColumns:nn,setColumnSettings:nn})}setup(){const[e,t]=Jl();for(const t of this.columnFilters)e.push(t.setup());return t}updateProps(e){e.columns.forEach(((e,t)=>{this._allColumns[t].updateProps(e),this.columnFilters[t].updateProps(e)})),this.visibleColumns.length<1&&this._allColumns.forEach((e=>{e.isHidden=!1}))}swapColumns(e,t){let[n,r]=t;const i=this._allColumnsById.get(e),o=this._allColumnsById.get(n);i.orderWeight=o.orderWeight+("after"===r?1:-1),this._allColumnsOrdered.forEach(((e,t)=>{e.orderWeight=10*t}))}setIsResizing(e){this.isResizing=e,this.isResizing&&this._allColumns.forEach((e=>e.takeSizeSnapshot()))}get loaded(){return this._allColumns.every((e=>e.loaded))}get _allColumnsOrdered(){return[...this._allColumns].sort(((e,t)=>e.orderWeight-t.orderWeight))}get availableColumns(){return[...this._allColumnsOrdered].filter((e=>e.isAvailable))}get visibleColumns(){return[...this.availableColumns].filter((e=>!e.isHidden))}get conditions(){return this.columnFilters.map(((e,t)=>this._allColumns[t].isHidden?void 0:e.condition2))}get sortInstructions(){return function(e,t){if(e.length)return e.map((e=>{var n;const[r,i]=e,o=null===(n=t.find((e=>e.columnId===r)))||void 0===n?void 0:n.attrId;if(o)return[o,i]})).filter((e=>!!e))}(this.sorting.rules,this._allColumns)}get columnSettings(){return this._allColumns.map((e=>e.settings))}get filterSettings(){return this.columnFilters.reduce(((e,t,n)=>(t.settings&&e.set(this._allColumns[n].columnId,t.settings),e)),new Map)}setColumnSettings(e){e.forEach((e=>{const t=this._allColumnsById.get(e.columnId);t?t.applySettings(e):console.warn("Error while restoring personalization config. Column '".concat(e.columnId,"' is not found."))})),this.sorting.rules=e.filter((e=>e.sortDir&&void 0!==e.sortWeight)).sort(((e,t)=>e.sortWeight-t.sortWeight)).map((e=>[e.columnId,e.sortDir]))}setColumnFilterSettings(e){for(const[r,i]of e){var t,n;const e=null!==(t=null===(n=this._allColumnsById.get(r))||void 0===n?void 0:n.columnIndex)&&void 0!==t?t:NaN,o=this.columnFilters.at(e);o&&(o.settings=i)}}isLastVisible(e){return this.visibleColumns.at(-1)===e}}class Au{constructor(e){_defineProperty(this,"_storageAttr",void 0),this._storageAttr=e.configurationAttribute,zn(this,{_storageAttr:Qe.ref,_value:rt,settings:rt.struct,updateProps:nn})}updateProps(e){this._storageAttr=e.configurationAttribute}get _value(){if(this._storageAttr&&"available"===this._storageAttr.status)return this._storageAttr.value}get settings(){if(this._value)return JSON.parse(this._value)}updateSettings(e){if(e=""===e||null===e?void 0:e,this._storageAttr&&!this._storageAttr.readOnly){const t=JSON.stringify(e);this._storageAttr.value!==t&&this._storageAttr.setValue(t)}}}class Tu{constructor(e){_defineProperty(this,"key",void 0),this.key=e}get settings(){const e=localStorage.getItem(this.key);return e?JSON.parse(e):void 0}updateSettings(e){const t=JSON.stringify(e);localStorage.getItem(this.key)!==t&&localStorage.setItem(this.key,t)}}class ku{constructor(e,t,n){var r,i;_defineProperty(this,"columnsStore",void 0),_defineProperty(this,"headerFilters",void 0),_defineProperty(this,"gridName",void 0),_defineProperty(this,"gridColumnsHash",void 0),_defineProperty(this,"schemaVersion",2),_defineProperty(this,"storeFilters",void 0),_defineProperty(this,"storage",void 0),_defineProperty(this,"disposers",[]),this.columnsStore=t,this.headerFilters=n,this.gridName=e.name,this.gridColumnsHash=(r=this.columnsStore._allColumns,i=this.gridName,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2166136261;const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}(JSON.stringify({name:i,columns:r.map((e=>({columnId:e.columnId,canSort:e.canSort,canHide:e.canHide,canResize:e.canResize,canDrag:e.canDrag})))})).toString()),this.storeFilters=e.storeFiltersInPersonalization,zn(this,{settings:rt,applySettings:nn}),"localStorage"===e.configurationStorageType?this.storage=new Tu("".concat(this.gridName,"_").concat(this.gridColumnsHash)):this.storage=new Au(e),this.disposers.push(this.setupReadReaction()),this.disposers.push(this.setupWriteReaction())}dispose(){this.disposers.forEach((e=>e()))}updateProps(e){var t,n;null===(t=(n=this.storage).updateProps)||void 0===t||t.call(n,e)}setupReadReaction(){return cn((()=>{const e=this.storage.settings,t=this.readSettings(this.gridName,this.gridColumnsHash,e);return t.hasError?(t.error instanceof Ru&&(console.warn(this.gridName,t.error),console.warn(this.gridName,"Erase settings to prevent errors."),this.storage.updateSettings(void 0)),null):t.value}),(e=>{null!=e&&this.applySettings(e)}),{fireImmediately:!0,equals:fe.structural})}setupWriteReaction(){return cn((()=>this.settings),(e=>{this.storage.updateSettings(e)}),{delay:250,equals:fe.structural})}applySettings(e){this.columnsStore.setColumnSettings(function(e){return e.columns.map((t=>{var n;const r=e.sortOrder.findIndex((e=>e[0]===t.columnId));return{columnId:t.columnId,size:t.size,hidden:t.hidden,orderWeight:e.columnOrder.indexOf(t.columnId),sortWeight:-1!==r?r+1:void 0,sortDir:-1!==r?null===(n=e.sortOrder[r])||void 0===n?void 0:n[1]:void 0}}))}(e)),this.columnsStore.setColumnFilterSettings(e.columnFilters)}readSettings(e,t,n){return null==n?Sa(new Iu):this.isSettingsObject(n)?n.name!==e||n.settingsHash!==t?Sa(new Error("Widget configuration for (".concat(e,")[hash:").concat(t,"]")+" doesn't match provided settings (".concat(n.name,")[hash:").concat(n.settingsHash,"].")+" Restoring those settings might result in errors.")):Ea(n):Sa(new Ru)}isSettingsObject(e){return"object"==typeof e&&null!==e&&"name"in e&&"settingsHash"in e&&"schemaVersion"in e&&e.schemaVersion===this.schemaVersion}get settings(){return function(e,t,n,r,i){const o=n.filter((e=>e.sortDir&&void 0!==e.sortWeight)).sort(((e,t)=>e.sortWeight-t.sortWeight)).map((e=>[e.columnId,e.sortDir])),s=[...n].sort(((e,t)=>e.orderWeight-t.orderWeight)).map((e=>e.columnId));return{name:e,schemaVersion:2,settingsHash:t,columns:n.map((e=>({columnId:e.columnId,size:e.size,hidden:e.hidden,filterSettings:void 0}))),columnFilters:Array.from(r),groupFilters:Array.from(i),sortOrder:o,columnOrder:s}}(this.gridName,this.gridColumnsHash,this.columnsStore.columnSettings,this.storeFilters?this.columnsStore.filterSettings:new Map,this.storeFilters?this.headerFilters.settings:new Map)}}class Ru extends Error{constructor(){super("Invalid settings object"),this.name="InvalidSettingsError"}}class Iu extends Error{constructor(){super("Settings is undefined"),this.name="UndefinedSettingsError"}}class Nu extends au{constructor(e){let{gate:t,exportCtrl:n}=e;super(),_defineProperty(this,"columnsStore",void 0),_defineProperty(this,"headerFiltersStore",void 0),_defineProperty(this,"settingsStore",void 0),_defineProperty(this,"staticInfo",void 0),_defineProperty(this,"exportProgressCtrl",void 0),_defineProperty(this,"loaderCtrl",void 0),_defineProperty(this,"paginationCtrl",void 0),_defineProperty(this,"gate",void 0);const{props:r}=t,[i,o]=hu.unzipFilter(r.datasource.filter);this.gate=t,this.staticInfo={name:r.name,filtersChannelName:"datagrid/".concat(w())};const s=new lu(this,{gate:t}),a=this.columnsStore=new Ou(r,this.staticInfo,i),l=this.headerFiltersStore=new ou(r,this.staticInfo,o);this.settingsStore=new ku(r,this.columnsStore,this.headerFiltersStore),this.paginationCtrl=new cu(this,{gate:t,query:s}),this.exportProgressCtrl=n,new hu(this,{query:s,columns:a,header:l}),new du(this,{query:rt((()=>s.computedCopy)),delay:1e3*r.refreshInterval}),this.loaderCtrl=new uu({exp:n,cols:a,query:s})}setup(){var e;const[t,n]=su();return t(super.setup()),t(this.columnsStore.setup()),t(null!==(e=this.headerFiltersStore.setup())&&void 0!==e?e:()=>{}),t((()=>this.settingsStore.dispose())),t(an((()=>this.updateProps(this.gate.props)))),n}updateProps(e){this.columnsStore.updateProps(e),this.settingsStore.updateProps(e)}}function Mu(t){const[n,r]=_l((()=>{const e=new yl;return[new ml(t,(()=>e.exporting)),e]})),i=function(t){const n=_l(t);return e.useEffect((()=>n.setup()),[n]),n}((()=>new Nu({gate:n.gate,exportCtrl:r})));return e.useEffect((()=>{n.setProps(t)})),i}class Du{constructor(e){_defineProperty(this,"_status","idle"),_defineProperty(this,"datasource",void 0),_defineProperty(this,"columns",void 0),_defineProperty(this,"offset",0),_defineProperty(this,"loaded",0),_defineProperty(this,"limit",10),_defineProperty(this,"totalCount",void 0),_defineProperty(this,"shouldSendHeaders",!1),_defineProperty(this,"emitter",void 0),_defineProperty(this,"getters",[]),_defineProperty(this,"readController",void 0),_defineProperty(this,"send",(()=>(this.emitLoadStart(),this._status="awaiting",this.offset=0,this.datasource.setLimit(this.limit),this.datasource.setOffset(this.offset),this.datasource.reload(),new Promise((e=>this.on("loadend",(()=>e()))))))),_defineProperty(this,"abort",(()=>{var e;this._status="aborted",null===(e=this.readController)||void 0===e||e.abort(),this.emitAbort(),this.emitLoadEnd(),this.dispose()})),_defineProperty(this,"onsourcechange",(e=>{const t=e.offset===this.offset&&e.limit===this.limit&&"available"===e.status;"awaiting"===this._status&&t&&(this.datasource=e,this.shouldSendHeaders&&(this.sendHeaders(),this.shouldSendHeaders=!1),this.read())})),_defineProperty(this,"onpropertieschange",(e=>{"reading"===this._status&&(this.columns=e,this.getters=this.getGetters(e),this.read())}));const{ds:t,columns:n,withHeaders:r=!1,limit:i=0}=e;this.limit=Math.max(i,this.limit),this.emitter=ll(),this.datasource=t,this.totalCount=t.totalCount,this.columns=n,this.getters=this.getGetters(n),this.shouldSendHeaders=r}get status(){return this._status}on(e,t){return this.emitter.on(e,t)}emitLoadStart(){this.emitter.emit("loadstart",this.createProgressEvent("loadstart"))}emitHeaders(e){this.emitter.emit("headers",e)}emitData(e){this.emitter.emit("data",e)}emitProgress(){this.emitter.emit("progress",this.createProgressEvent("progress"))}emitAbort(){this.emitter.emit("abort",this.createProgressEvent("abort"))}emitEnd(){this.emitter.emit("end",this.createProgressEvent("end"))}emitLoadEnd(){this.emitter.emit("loadend",this.createProgressEvent("loadend"))}createProgressEvent(e){return new ProgressEvent(e,{lengthComputable:"number"==typeof this.totalCount,loaded:this.loaded,total:this.totalCount})}sendHeaders(){const e=this.columns.map((e=>{var t,n,r,i,o;return{name:e.header&&(o=e.header,o&&"available"===o.status&&o.value)&&null!==(t=null===(n=e.header.value)||void 0===n?void 0:n.toString())&&void 0!==t?t:"",type:null!==(r=null===(i=e.attribute)||void 0===i?void 0:i.type.toString())&&void 0!==r?r:""}}));this.emitHeaders(e)}async read(){this._status="reading",this.readController&&(this.readController.abort(),this.readController=void 0);const{items:e=[]}=this.datasource,t=function(){if("scheduler"in window)return{yield:async()=>window.scheduler.yield()};return{yield:async()=>new Promise((e=>setTimeout(e)))}}(),n=new AbortController;this.readController=n;const r=e.length;let i=!0,o=0;for(;o<r&&!n.signal.aborted;){const n=Math.min(o+100,r);for(;o<n;o++)for(const t of this.getters)i&&(i="loading"!==t.get(e[o]).status);await t.yield()}this.readController=void 0,i&&!n.signal.aborted&&this.finalizeRead(e)}finalizeRead(e){const t=(n=e,r=this.columns,n.map(function(e){return t=>e.map((e=>Lu[e.showContentAs](t,e)))}(r)));var n,r;this.sendChunk(t),this.datasource.hasMoreItems?this.fetchNext():this.end()}sendChunk(e){this._status="sending",this.loaded+=e.length,this.emitData(e),this.emitProgress()}fetchNext(){this._status="awaiting",this.offset+=this.limit,this.datasource.setOffset(this.offset)}end(){this._status="end",this.emitEnd(),this.emitLoadEnd(),this.dispose()}dispose(){this.emitter.events={}}getGetters(e){return e.map((e=>{let t="attribute"===e.showContentAs?e.attribute:"dynamicText"===e.showContentAs?e.dynamicText:e.exportValue;return null!=t||(t={get:()=>({status:"available",value:"n/a"})}),t}))}}const Lu={attribute(e,t){if(void 0===t.attribute)return"";const n=t.attribute.get(e);return"available"!==n.status?"":"boolean"==typeof n.value?n.value:n.value instanceof u.default?n.value.toNumber():n.displayValue},dynamicText(e,t){if(void 0===t.dynamicText)return"";const n=t.dynamicText.get(e);switch(n.status){case"available":return n.value;case"unavailable":return"n/a";default:return""}},customContent(e,t){var n,r;return null!==(n=null===(r=t.exportValue)||void 0===r?void 0:r.get(e).value)&&void 0!==n?n:""}};class Fu{constructor(e){_defineProperty(this,"datasource",null),_defineProperty(this,"columns",[]),_defineProperty(this,"properties",[]),_defineProperty(this,"emitter",void 0),_defineProperty(this,"locked",!1),_defineProperty(this,"progressStore",void 0),_defineProperty(this,"oncolumnschange",(e=>{!1===this.locked&&(this.columns=e)})),_defineProperty(this,"onsourcechange",(e=>{this.datasource=e})),_defineProperty(this,"onpropertieschange",(e=>{this.properties=e})),_defineProperty(this,"abort",(()=>this.emitter.emit("abort"))),this.progressStore=e,this.emitter=ll(),this.emitter.on("columnschange",this.oncolumnschange),this.emitter.on("propertieschange",this.onpropertieschange),this.emitter.on("sourcechange",this.onsourcechange)}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emitter.emit(e,...n)}connectProgress(e){e.on("loadstart",this.progressStore.onloadstart),e.on("progress",this.progressStore.onprogress);const t=this.emitter.on("exportend",(()=>{this.progressStore.onloadend(),t()}))}async exportData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===this.datasource)return void console.error("Export controller: datasource is missing.");0!==this.properties.length&&0!==this.columns.length||console.error("Export controller: no columns to export.");const n=this.createFilter(this.columns.slice()),r={offset:this.datasource.offset,limit:this.datasource.limit};this.locked=!0;let i=new Du({ds:this.datasource,columns:n(this.properties),...t});this.connectProgress(i);const o=[this.emitter.on("sourcechange",i.onsourcechange),this.emitter.on("propertieschange",(e=>{var t;return null===(t=i)||void 0===t?void 0:t.onpropertieschange(n(e))})),this.emitter.on("abort",i.abort)];e(i),await i.send(),o.forEach((e=>e())),i=null,this.datasource.setLimit(r.limit),this.datasource.setOffset(r.offset),this.datasource.reload();const s=this.emitter.on("sourcechange",(e=>{e.limit===r.limit&&e.offset===r.offset&&(this.emitter.emit("exportend"),this.locked=!1,s())}))}createFilter(e){const t=e=>"customContent"!==e.showContentAs||void 0!==e.exportValue;return n=>e.map((e=>n[e])).filter(t)}}const ju="com.mendix.widgets.web.datagrid.export";function Vu(){var e,t;return null!==(t=(e=window)[ju])&&void 0!==t?t:e[ju]=new Map}function zu(t,n,r){const[i]=e.useState((()=>function(e,t){return{key:e,controller:new Fu(t)}}(t.name,r))),o=e.useCallback((()=>null==i?void 0:i.controller.abort()),[i]);return e.useEffect((()=>(function(e){Vu().set(e.key,e.controller)}(i),()=>{null==i||i.controller.abort(),function(e){if(!e)return;const t=Vu();t.get(e.key)===e.controller&&t.delete(e.key)}(i)})),[i]),e.useEffect((()=>{null==i||i.controller.emit("sourcechange",t.datasource)}),[t.datasource,i]),e.useEffect((()=>{null==i||i.controller.emit("propertieschange",t.columns)}),[t.columns,i]),e.useEffect((()=>{null==i||i.controller.emit("columnschange",n.visibleColumns.map((e=>e.columnIndex)))}),[n.visibleColumns,i]),[r,o]}const Hu=Qr((t=>{var n,r,i,o,s,a,l;const{columnsStore:u,rootStore:c}=t,{paginationCtrl:d}=c,h=null!==(n=t.datasource.items)&&void 0!==n?n:[],[f,v]=zu(t,t.columnsStore,t.progressStore),g=p(t.itemSelection,t.datasource,t.onSelectionChange),m=function(t,n){return e.useMemo((()=>{var e;return new Ia(t.itemSelection,n,t.itemSelectionMethod,t.showSelectAllToggle,null!==(e=t.pageSize)&&void 0!==e?e:5,t.itemSelectionMode)}),[n])}(t,g),_=function(t){const n=e.useMemo((()=>new Na(t.onClickTrigger,t.onClick)),[]);return e.useEffect((()=>{n.update(t.onClick)})),n}({onClickTrigger:t.onClickTrigger,onClick:t.onClick});var y,b;y=c.staticInfo.name,b=c.staticInfo.filtersChannelName,fl(e.useRef({inputChannel:y,event:al.reset.filters,onEvent:(e,t)=>{e(b,al.reset.value,...t)}}).current);const S=m.showCheckboxColumn?u.visibleColumns.length+1:u.visibleColumns.length,E=function(t){let{rows:n,columns:r,pageSize:i}=t;const o=e.useRef(null);return e.useMemo((()=>{const e=new rl(n,r,i);return null===o.current?o.current=new nl(new sl,e):o.current.updateGridLayout(e),o.current}),[n,r,i])}({rows:h.length,columns:S,pageSize:t.pageSize}),x=function(t,n,r){return e.useMemo((()=>new Ya((e=>({item:e,pageSize:t.pageSize,selectionType:t.selectionType,selectionMethod:t.selectionMethod,selectionMode:t.selectionMode,clickTrigger:n.clickTrigger})),t.onSelect,t.onSelectAll,t.onSelectAdjacent,n.onExecuteAction,r.dispatch)),[t,n,r])}(m,_,E),P=function(t,n){return e.useMemo((()=>new tl((e=>({item:e,pageSize:t.pageSize,selectionType:t.selectionType,selectionMethod:t.selectionMethod,selectionMode:t.selectionMode})),t.onSelect,t.onSelectAll,t.onSelectAdjacent,n.dispatch)),[t,n])}(m,E);return e.createElement(_a,{className:t.class,CellComponent:vi,columnsDraggable:t.columnsDraggable,columnsFilterable:t.columnsFilterable,columnsHidable:t.columnsHidable,columnsResizable:t.columnsResizable,columnsSortable:t.columnsSortable,data:h,emptyPlaceholderRenderer:e.useCallback((n=>"custom"===t.showEmptyPlaceholder?n(t.emptyPlaceholder):e.createElement("div",null)),[t.emptyPlaceholder,t.showEmptyPlaceholder]),filterRenderer:e.useCallback(((e,t)=>e(u.columnFilters[t].renderFilterWidgets())),[u.columnFilters]),headerTitle:null===(r=t.filterSectionTitle)||void 0===r?void 0:r.value,headerContent:t.filtersPlaceholder&&e.createElement(Ra,{selectionHelper:g,filtersStore:c.headerFiltersStore},t.filtersPlaceholder),hasMoreItems:null!==(i=t.datasource.hasMoreItems)&&void 0!==i&&i,headerWrapperRenderer:e.useCallback(((e,t)=>t),[]),id:e.useMemo((()=>"DataGrid".concat(w())),[]),numberOfItems:t.datasource.totalCount,onExportCancel:v,page:d.currentPage,pageSize:t.pageSize,paginationType:t.pagination,loadMoreButtonCaption:null===(o=t.loadMoreButtonCaption)||void 0===o?void 0:o.value,paging:d.showPagination,pagingPosition:t.pagingPosition,showPagingButtons:t.showPagingButtons,rowClass:e.useCallback((e=>{var n,r;return null!==(n=null===(r=t.rowClass)||void 0===r||null===(r=r.get(e))||void 0===r?void 0:r.value)&&void 0!==n?n:""}),[t.rowClass]),gridInteractive:!(!t.itemSelection&&!t.onClick),setPage:d.setPage,styles:t.style,selectionStatus:"Multi"===(null==g?void 0:g.type)?g.selectionStatus:"unknown",exporting:f.exporting,processedRows:f.loaded,exportDialogLabel:null===(s=t.exportDialogLabel)||void 0===s?void 0:s.value,cancelExportLabel:null===(a=t.cancelExportLabel)||void 0===a?void 0:a.value,selectRowLabel:null===(l=t.selectRowLabel)||void 0===l?void 0:l.value,visibleColumns:u.visibleColumns,availableColumns:u.availableColumns,setIsResizing:e=>u.setIsResizing(e),columnsSwap:(e,t)=>{let[n,r]=t;return u.swapColumns(e,[n,r])},selectActionHelper:m,cellEventsController:x,checkboxEventsController:P,focusController:E,isLoading:c.loaderCtrl.isLoading,isFetchingNextBatch:c.loaderCtrl.isFetchingNextBatch,loadingType:t.loadingType,columnsLoading:!u.loaded})}));return Hu.displayName="DatagridComponent",function(t){const n=Mu(t);return e.createElement(Hu,{...t,rootStore:n,columnsStore:n.columnsStore,progressStore:n.exportProgressCtrl})}}));
